<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TTA | Student Profile</title>

    <link rel="shortcut icon" href="../../static/images/thumb.png">
    
    <!-- Styles -->
    <link rel="stylesheet" href="../../static/css/fonts.css">
    <link rel="stylesheet" href="../../static/css/brix-family.css">

    <link rel="stylesheet" href="../../static/css/colors.css">
    
    <link rel="stylesheet" href="/admin/views/user-info_styles.css">

    <!-- PDF scripts -->
    <script src='https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.62/pdfmake.min.js'></script>
    <script src='https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.62/vfs_fonts.js'></script>


</head>
<body>

    <!-- sprite -->
    <svg class='-hidden-sprite'>
        <symbol id="delete" viewBox="0 0 32 32">
            <line class="cls-1" x1="7" x2="25" y1="7" y2="25"/>
            <line class="cls-1" x1="7" x2="25" y1="25" y2="7"/>
        </symbol>
    </svg>
    
    <svg class='-hidden-sprite'>
        <symbol id="redo" viewBox="0 0 40.5 40.5">
            <path d="M40.5,20.25c0,9.374-7.625,17-17,17c-1.656,0-3-1.343-3-3s1.344-3,3-3c6.064,0,11-4.936,11-11c0-6.065-4.936-11-11-11 c-5.756,0-10.486,4.447-10.953,10.086l1.832-1.832c1.171-1.172,3.071-1.172,4.242,0c1.172,1.171,1.172,3.071,0,4.242l-6.75,6.75 c-0.563,0.562-1.326,0.879-2.121,0.879c-0.796,0-1.559-0.316-2.121-0.879l-6.75-6.75c-1.172-1.172-1.172-3.071,0-4.242 c1.172-1.172,3.071-1.172,4.243,0l1.444,1.444c0.669-8.766,8-15.698,16.934-15.698C32.875,3.25,40.5,10.876,40.5,20.25z"/>
        </symbol>
    </svg>


    <div class="main-box">

        <header class='main-info-box'>
            
            <div class="head-name-info">
                <% if(user.dataCollection) { %>
                    <h1 class="student-full-name"><%= user.dataCollection.lastName %> <%= user.dataCollection.firstName %> <%= user.dataCollection.middleName %></h1>
                    <h3 class="student-address"><%= user.dataCollection.street %> <%= user.dataCollection.city %>, <%= user.dataCollection.state %> <%= user.dataCollection.zip %></h3>
                <% } else { %>
                    <h1 class="student-full-name">New User</h1>
                    <h3 class="student-address">no address data yet</h3>
                <% } %>
            </div>  <!-- head-name-info -->
            
            <div class="head-user-info">
                <span class="user-nick-name">nickname: <%= user.name %></span>
    
                <% if (user.token === 'not sent') { %>
                    <span class="user-email">(<%= user.email %><span class="email-verify">: not verified yet</span>)</span>
                <% } else { %>
                    <% if (user.token === 'verified') { %>
                        <span class="user-email">(<%= user.email %><span class="email-verify -trusted">: trusted</span>)</span>
                    <% } else { %>
                        <span class="user-email">(<%= user.email %><span class="email-verify -unsafe">: unsafe</span>)</span>
                    <% } %>
                <% } %>
                <br>
                <span class="user-profile-created">profile created <%= new Date(user.created).toLocaleDateString('en-US', { timeZone: 'America/Los_Angeles' }) %>,</span>
                <span class="user-last-session">last session <%= new Date(user.lastSESS).toLocaleDateString('en-US', { timeZone: 'America/Los_Angeles' }) %> <%= new Date(user.lastSESS).toLocaleTimeString('en-US', { timeZone: 'America/Los_Angeles' }) %></span>   
            </div>      <!-- user-info -->
        </header>   <!-- main-info-box -->

        <nav class='nav-menu'>
            <div class="nav-menu-box">
                <div class="block-title" name='block1' onclick='toggleBlock(this)'>Data Collection</div>
                <div class="block-title" name='block2' onclick='toggleBlock(this)'>Application</div>
                <div class="block-title" name='block3' onclick='toggleBlock(this)'>Agreement</div>
                <div class="block-title" name='block4' onclick='toggleBlock(this)'>Student Data</div>
            </div>
        </nav>

        <menu>
            <a href="/admin/profile" id="back-to-prolife" title="Admin Profile">
                <svg class="ico -sys" viewBox="0 0 122.88 120.26">
                    <path d="M47,70.06a19,19,0,0,1-1.66-2c-1.23-1.68-2.37-3.44-3.49-5.21L36.35,54c-2.1-3.1-3.21-5.86-3.21-8.08s1.25-5.12,3.76-5.75a152.65,152.65,0,0,1-.22-15.93,21.05,21.05,0,0,1,.66-3.65A21,21,0,0,1,46.75,8.64,24.2,24.2,0,0,1,51.84,6.2C55.05,5,53.5.12,57,0,65.34-.22,79,6.87,84.26,12.62a20.91,20.91,0,0,1,5.42,13.61l-.33,14.49a4.12,4.12,0,0,1,3,3c.44,1.77,0,4.2-1.55,7.64h0c0,.11-.11.11-.11.22L84.37,62c-1.44,2.36-2.92,4.75-4.58,7-2,2.63-3.59,2.16-1.91,4.68a22,22,0,0,0,8.29,6.66,8.55,8.55,0,0,0-1.19.22h0A7.29,7.29,0,0,0,80.38,84l-2.27,3.93a7.63,7.63,0,0,0-.93,2.77h0a7.61,7.61,0,0,0,.18,2.84l0,.18a7.45,7.45,0,0,0,1.27,2.57l.06.09q-.24.15-.48.33a7.3,7.3,0,0,0-2,2.26,7.39,7.39,0,0,0-.95,2.85,7.93,7.93,0,0,0,.2,2.86h0l1.15,4.37a5.51,5.51,0,0,0,.37,1,7.55,7.55,0,0,0,1,1.73c.1.13.21.25.32.37s.37.38.56.56H0c0-33,35.5-22.55,47.58-39.15,1.39-2.08,1-1.88-.55-3.55Zm74.74,23.68a1.92,1.92,0,0,0-.91-1.2,1.86,1.86,0,0,0-1.48-.18l-2.87.76a14.86,14.86,0,0,0-1.06-1.73,18.15,18.15,0,0,0-1.28-1.59L115.78,87a1.9,1.9,0,0,0-.71-2.65l-3.5-2a1.89,1.89,0,0,0-1.46-.2,1.87,1.87,0,0,0-1.18.91l-1.48,2.55a14.06,14.06,0,0,0-2-.45,15.22,15.22,0,0,0-2-.19l-.87-3.15a1.78,1.78,0,0,0-.87-1.17,1.89,1.89,0,0,0-1.49-.19l-3.87,1a1.9,1.9,0,0,0-1.19.91A1.86,1.86,0,0,0,95,83.88l.77,2.87A13.36,13.36,0,0,0,94,87.81a16.31,16.31,0,0,0-1.6,1.28l-2.79-1.62a1.9,1.9,0,0,0-1.47-.2,1.85,1.85,0,0,0-1.18.92l-2,3.5a1.87,1.87,0,0,0-.19,1.45,1.81,1.81,0,0,0,.9,1.19l2.55,1.48a15.58,15.58,0,0,0-.45,2,15.35,15.35,0,0,0-.2,2l-3.13.83a1.76,1.76,0,0,0-1.18.88,1.9,1.9,0,0,0-.19,1.48l1,3.9a1.91,1.91,0,0,0,.92,1.16,1.88,1.88,0,0,0,1.46.22l2.89-.79a14.86,14.86,0,0,0,1.06,1.73c.4.55.83,1.08,1.28,1.59l-1.61,2.79a1.91,1.91,0,0,0-.21,1.47,1.88,1.88,0,0,0,.92,1.18l3.5,2a2,2,0,0,0,2.65-.71L98.44,115a14.1,14.1,0,0,0,2,.46,17.27,17.27,0,0,0,2,.2l.83,3.13a1.82,1.82,0,0,0,.89,1.19,1.77,1.77,0,0,0,1.47.17l3.91-1a2,2,0,0,0,1.37-2.39l-.79-2.88a14.07,14.07,0,0,0,1.73-1.06,19.77,19.77,0,0,0,1.59-1.28l2.79,1.61a1.92,1.92,0,0,0,2.65-.71l2-3.5a2,2,0,0,0-.71-2.65l-2.55-1.47a17.82,17.82,0,0,0,.44-2,14.25,14.25,0,0,0,.2-2l3.14-.86a1.79,1.79,0,0,0,1.18-.88,1.86,1.86,0,0,0,.19-1.48l-1-3.87Zm-14.86-.29a8,8,0,0,1,2.36,2.08,7.78,7.78,0,0,1,1.55,5.76A8,8,0,0,1,105,108a7.87,7.87,0,0,1-3,.2,8.06,8.06,0,0,1-5.35-3.09,7.79,7.79,0,0,1-1.54-5.75A8,8,0,0,1,98.16,94a7.78,7.78,0,0,1,5.76-1.55,8.09,8.09,0,0,1,3,1Z"/>
                </svg>
            </a>
            <a href="/admin/user-area" id="back-to-users" title="Users Area">
                <svg class="ico -sys" viewBox="0 0 122.88 79.13">
                    <path d="M72.74,51.34A11.29,11.29,0,0,1,67.43,48c3.55-1.34,5.2-4.93,5.42-11.22.17-4.68-.79-8.2.8-12.81C76.8,14.82,88.48,11.7,95,17.05c5.1-.55,10.24,2.08,11.35,10,.82,5.86-.93,11,.92,16.4a8.41,8.41,0,0,0,4.35,5.15,12.65,12.65,0,0,1-5.81,2.8,59.57,59.57,0,0,1-9.17,1v2.76l3.19,5.1-10.3,8.07-10.3-8,2.29-4.9v-3a39.86,39.86,0,0,1-8.76-1.1ZM29,53.86a7.58,7.58,0,0,1,.79-2.76c-2.26-2-4-4-4.42-8.19h-.24a3.35,3.35,0,0,1-1.6-.42,4.34,4.34,0,0,1-1.76-2.14c-.82-1.87-1.46-6.78.59-8.18L22,31.92l0-.55c-.08-1-.1-2.18-.12-3.44-.07-4.61-.17-10.2-3.88-11.33l-1.59-.48,1.05-1.29a60.37,60.37,0,0,1,9.29-9.44C30.23,2.58,33.87.7,37.42.16A13,13,0,0,1,47.89,3.09,20.24,20.24,0,0,1,50.7,5.91a11.86,11.86,0,0,1,8.37,4.9,17,17,0,0,1,2.73,5.5,18.78,18.78,0,0,1,.73,6.24,15,15,0,0,1-4.34,10.12,3.11,3.11,0,0,1,1.35.35c1.55.83,1.6,2.62,1.19,4.13-.4,1.26-.91,2.73-1.39,4-.59,1.66-1.44,2-3.1,1.79-.08,4.1-2,6.11-4.53,8.52l.58,2c-1.61,7.8-18.69,8.65-23.31.43ZM0,79.13C1.62,58.19,5.56,66,23.42,54.86c4.93,12.8,28.6,13.65,33.79,0,15.42,9.85,23.11,2.41,23,24.27ZM105.69,64.61c-1.69-3.4-2.27-4.71-4.76-7.42,4.7,1.83,8.71,2.06,12.27,4.29,2.27,1.42,5.63,2.49,6.55,4.21,2.26,4.23,1.92,8.94,3.13,13.44H86.26a70.42,70.42,0,0,0-.41-8.56l3.39,2.71,11.55-8.79,4.9.12ZM77.93,57.26l.17-.07L78,57.3l-.08,0Z"/>
                </svg>
            </a>
            <a href="/admin/student/list" id="back-to-students" title="Student List">
                <svg class="ico -sys" viewBox="0 0 512 512">
                    <polygon points="32 192 256 64 480 192 256 320 32 192"/><polyline points="112 240 112 368 256 448 400 368 400 240"/><line x1="480" y1="368" x2="480" y2="192"/><line x1="256" y1="320" x2="256" y2="448" />
                </svg>
            </a>

            <% const blockClass = !user.student ? "-inactive" : user.student.status === "block" ? "-active" : "-inactive" %>
            <span class="<%= blockClass %>" id="block-menu-item" title="Block a Student(Unable Clocking)">
                <svg class="ico -block <%= blockClass %>" viewBox="0 0 122.88 119.8" onclick="menuAction('block')">
                    <path d="M23.59,0h75.7a23.63,23.63,0,0,1,23.59,23.59V96.21A23.64,23.64,0,0,1,99.29,119.8H23.59a23.53,23.53,0,0,1-16.67-6.93l-.38-.42A23.49,23.49,0,0,1,0,96.21V23.59A23.63,23.63,0,0,1,23.59,0Zm59.7,53.51a6.39,6.39,0,1,1,0,12.77H39.59a6.39,6.39,0,1,1,0-12.77Zm16-40.74H23.59A10.86,10.86,0,0,0,12.77,23.59V96.21a10.77,10.77,0,0,0,2.9,7.37l.28.26A10.76,10.76,0,0,0,23.59,107h75.7a10.87,10.87,0,0,0,10.82-10.82V23.59A10.86,10.86,0,0,0,99.29,12.77Z"/>
                </svg>
            </span>
            <% const unblockClass = !user.student ? "-inactive" : user.student.status === "unblock" ? "-active" : "-inactive" %>
            <span class="<%= unblockClass %>" id="unblock-menu-item" title="Unblock a Student(Allow Clocking)">
                <svg class="ico -unblock <%= unblockClass %>" viewBox="0 0 122.88 119.8" onclick="menuAction('unblock')">
                    <path d="M23.59,0h75.7a23.63,23.63,0,0,1,23.59,23.59V96.21A23.64,23.64,0,0,1,99.29,119.8H23.59a23.53,23.53,0,0,1-16.67-6.93l-.38-.42A23.49,23.49,0,0,1,0,96.21V23.59A23.63,23.63,0,0,1,23.59,0ZM55.06,38.05a6.38,6.38,0,1,1,12.76,0V53.51H83.29a6.39,6.39,0,1,1,0,12.77H67.82V81.75a6.38,6.38,0,0,1-12.76,0V66.28H39.59a6.39,6.39,0,1,1,0-12.77H55.06V38.05ZM99.29,12.77H23.59A10.86,10.86,0,0,0,12.77,23.59V96.21a10.77,10.77,0,0,0,2.9,7.37l.28.26A10.76,10.76,0,0,0,23.59,107h75.7a10.87,10.87,0,0,0,10.82-10.82V23.59A10.86,10.86,0,0,0,99.29,12.77Z"/>
                </svg>
            </span>
            <% const archiveClass = !user.student ? "-inactive" : user.student.status === "archive" ? "-active" : "-inactive" %>
            <span class="<%= archiveClass %>" id="archive-menu-item" title="Move to Archive">
                <svg class="ico -archivate" viewBox="0 0 122.88 114.318" onclick="menuAction('archive')">
                    <path d="M122.88,35.289L87.945,70.578v-17.58c-22.091-4.577-39.542,0.468-52.796,17.271 c2.301-34.558,25.907-51.235,52.795-52.339L87.945,0L122.88,35.289L122.88,35.289z"/><path d="M6.908,23.746h35.626c-4.587,3.96-8.71,8.563-12.264,13.815H13.815v62.943h80.603V85.831l13.814-13.579v35.159 c0,3.814-3.093,6.907-6.907,6.907H6.908c-3.815,0-6.908-3.093-6.908-6.907V30.653C0,26.838,3.093,23.746,6.908,23.746L6.908,23.746 z"/>
                </svg>
            </span>
            <span id="delete-menu-item" title="Delete without Archiving">
                <svg class="ico -delete" viewBox="0 0 122.88 119.79" onclick="menuAction('delete')">
                    <path d="M23.5,0H99.38a23.56,23.56,0,0,1,23.5,23.5V96.29a23.56,23.56,0,0,1-23.5,23.5H23.5a23.44,23.44,0,0,1-16.6-6.9l-.37-.4A23.43,23.43,0,0,1,0,96.29V23.5A23.56,23.56,0,0,1,23.5,0ZM41,49.35a7,7,0,0,1,9.89-9.89L61.44,50,72,39.46a7,7,0,1,1,9.89,9.9L71.33,59.9,81.87,70.43A7,7,0,0,1,72,80.33L61.44,69.79,50.9,80.33A7,7,0,0,1,41,70.43L51.55,59.89,41,49.35ZM99.38,12.52H23.5a11,11,0,0,0-11,11V96.29a10.92,10.92,0,0,0,3,7.49l.27.26a11,11,0,0,0,7.75,3.23H99.38a11,11,0,0,0,11-11V23.5a11,11,0,0,0-11-11Z"/>
                </svg>
            </span>
        </menu>
        
        <section class="block-box -hidden" name='blockBox' id='block1'>
            <h2 class="block-header">Data Collection Form</h2>
            
            <!-- dataCollection info more data -->
            <% if(user.dataCollection) { %>

                <form action='/admin/update-form1/<%= user.dataCollection._id %>' method="post" class='block-box-inner' id='form1'>

                    <input type="hidden" name='postedPath' value='/admin/user/<%= user._id %>' />       <!-- path for getting back after updating -->

                    <section class="row-item-85">
                        <div class="fields-set">
                            <div class="field-title">First Name</div>
                            <div class="field-value"><%= user.dataCollection.firstName %></div>
                        </div>
                        <div class="fields-set">
                            <label class="show-edit-btn" for='firstName' onclick='toggleEditField(this)'>edit</label>
                            <div class="fields-set -hidden" name="data-coll-edits" data-id='firstName'>
                                <label class="show-edit-btn -red" for='firstName' onclick='cleanField(this)'>
                                    <svg class="delete-mark">
                                        <use xlink:href="#delete"></use> 
                                    </svg>
                                </label>    <!-- show-edit-btn -red -->
                                <input class='input-box' onchange="checkAllChanged(this)" type="text" name="firstName" id="firstName"/>
                            </div>  <!-- data-id hidden area -->
                        </div>  
                    </section>  <!-- firstName -->

                    <section class="row-item-85">
                        <div class="fields-set">
                            <div class="field-title">Last Name</div>
                            <div class="field-value"><%= user.dataCollection.lastName %></div>
                        </div>
                        <div class="fields-set">
                            <label class="show-edit-btn" for='lastName' onclick='toggleEditField(this)'>edit</label>
                            <div class="fields-set -hidden" name="data-coll-edits" data-id='lastName'>
                                <label class="show-edit-btn -red" for='lastName' onclick='cleanField(this)'>
                                    <svg class="delete-mark">
                                        <use xlink:href="#delete"></use> 
                                    </svg>
                                </label>    <!-- show-edit-btn -red -->
                                <input class='input-box' onchange="checkAllChanged(this)" type="text" name="lastName" id="lastName"/>
                            </div>  <!-- data-id hidden area -->
                        </div>  
                    </section>  <!-- lastName -->

                    <section class="row-item-85">
                        <div class="fields-set">
                            <div class="field-title">Middle Name</div>
                            <div class="field-value"><%= user.dataCollection.middleName %></div>
                        </div>
                        <div class="fields-set">
                            <label class="show-edit-btn" for='middleName' onclick='toggleEditField(this)'>edit</label>
                            <div class="fields-set -hidden" name="data-coll-edits" data-id='middleName'>
                                <label class="show-edit-btn -red" for='middleName' onclick='cleanField(this)'>
                                    <svg class="delete-mark">
                                        <use xlink:href="#delete"></use> 
                                    </svg>
                                </label>    <!-- show-edit-btn -red -->
                                <input class='input-box' onchange="checkAllChanged(this)" type="text" name="middleName" id="middleName"/>
                            </div>  <!-- data-id hidden area -->
                        </div>  
                    </section>  <!-- middleName -->

                    <section class="row-item-85">
                        <div class="fields-set">
                            <div class="field-title">Street Address</div>
                            <div class="field-value"><%= user.dataCollection.street %></div>
                        </div>
                        <div class="fields-set">
                            <label class="show-edit-btn" for='street' onclick='toggleEditField(this)'>edit</label>
                            <div class="fields-set -hidden" name="data-coll-edits" data-id='street'>
                                <label class="show-edit-btn -red" for='street' onclick='cleanField(this)'>
                                    <svg class="delete-mark">
                                        <use xlink:href="#delete"></use> 
                                    </svg>
                                </label>    <!-- show-edit-btn -red -->
                                <input class='input-box' onchange="checkAllChanged(this)" type="text" name="street" id="street" />
                            </div>  <!-- data-id hidden area -->
                        </div>  
                    </section>  <!-- street -->

                    <section class="row-item-85">
                        <div class="fields-set">
                            <div class="field-title">City</div>
                            <div class="field-value"><%= user.dataCollection.city %></div>
                        </div>
                        <div class="fields-set">
                            <label class="show-edit-btn" for='city' onclick='toggleEditField(this)'>edit</label>
                            <div class="fields-set -hidden" name="data-coll-edits" data-id='city'>
                                <label class="show-edit-btn -red" for='city' onclick='cleanField(this)'>
                                    <svg class="delete-mark">
                                        <use xlink:href="#delete"></use> 
                                    </svg>
                                </label>    <!-- show-edit-btn -red -->
                                <input class='input-box' onchange="checkAllChanged(this)" type="text" name="city" id="city" />
                            </div>  <!-- data-id hidden area -->
                        </div>  
                    </section>  <!-- city -->

                    <section class="row-item-85">
                        <div class="fields-set">
                            <div class="field-title">State/Province/Region</div>
                            <div class="field-value"><%= user.dataCollection.state %></div>
                        </div>
                        <div class="fields-set">
                            <label class="show-edit-btn" for='state' onclick='toggleEditField(this)'>edit</label>
                            <div class="fields-set -hidden" name="data-coll-edits" data-id='state'>
                                <label class="show-edit-btn -red" for='state' onclick='cleanField(this)'>
                                    <svg class="delete-mark">
                                        <use xlink:href="#delete"></use> 
                                    </svg>
                                </label>    <!-- show-edit-btn -red -->
                                <select autocomplete="off" class='input-box' onchange="checkAllChanged(this)" name="state" id="state">
                                    <option value='DNU'>do not update</option>
                                    <optgroup label="locations">
                                        <option value='Washington'>Washington</option>
                                    </optgroup>
                                    <option value='Alaska'>Alaska</option>
                                    <option value='Alabama'>Alabama</option>
                                    <option value='Arkansas'>Arkansas</option>
                                    <option value='Arizona'>Arizona</option>
                                    <option value='California'>California</option>
                                    <option value='Colorado'>Colorado</option>
                                    <option value='Connecticut'>Connecticut</option>
                                    <option value='Washington DC'>Washington DC</option>
                                    <option value='Delaware'>Delaware</option>
                                    <option value='Florida'>Florida</option>
                                    <option value='Georgia'>Georgia</option>
                                    <option value='Hawaii'>Hawaii</option>
                                    <option value='Iowa'>Iowa</option>
                                    <option value='Idaho'>Idaho</option>
                                    <option value='Illinois'>Illinois</option>
                                    <option value='Indiana'>Indiana</option>
                                    <option value='Kansas'>Kansas</option>
                                    <option value='Kentucky'>Kentucky</option>
                                    <option value='Louisiana'>Louisiana</option>
                                    <option value='Massachusetts'>Massachusetts</option>
                                    <option value='Maryland'>Maryland</option>
                                    <option value='Maine'>Maine</option>
                                    <option value='Michigan'>Michigan</option>
                                    <option value='Minnesota'>Minnesota</option>
                                    <option value='Missouri'>Missouri</option>
                                    <option value='Mississippi'>Mississippi</option>
                                    <option value='Montana'>Montana</option>
                                    <option value='North Carolina'>North Carolina</option>
                                    <option value='North Dakota'>North Dakota</option>
                                    <option value='Nebraska'>Nebraska</option>
                                    <option value='New Hampshire'>New Hampshire</option>
                                    <option value='New Jersey'>New Jersey</option>
                                    <option value='New Mexico'>New Mexico</option>
                                    <option value='Nevada'>Nevada</option>
                                    <option value='New York'>New York</option>
                                    <option value='Ohio'>Ohio</option>
                                    <option value='Oklahoma'>Oklahoma</option>
                                    <option value='Oregon'>Oregon</option>
                                    <option value='Pennsylvania'>Pennsylvania</option>
                                    <option value='Rhode Island'>Rhode Island</option>
                                    <option value='South Carolina'>South Carolina</option>
                                    <option value='South Dakota'>South Dakota</option>
                                    <option value='Tennessee'>Tennessee</option>
                                    <option value='Texas'>Texas</option>
                                    <option value='Utah'>Utah</option>
                                    <option value='Virginia'>Virginia</option>
                                    <option value='Vermont'>Vermont</option>
                                    <option value='Wisconsin'>Wisconsin</option>
                                    <option value='West Virginia'>West Virginia</option>
                                    <option value='Wyoming'>Wyoming</option>
                                </select>
                            </div>  <!-- data-id hidden area -->
                        </div>  
                    </section>  <!-- state -->

                    <section class="row-item-85">
                        <div class="fields-set">
                            <div class="field-title">Postal/Zip Code</div>
                            <div class="field-value"><%= user.dataCollection.zip %></div>
                        </div>
                        <div class="fields-set">
                            <label class="show-edit-btn" for='zip' onclick='toggleEditField(this)'>edit</label>
                            <div class="fields-set -hidden" name="data-coll-edits" data-id='zip'>
                                <label class="show-edit-btn -red" for='zip' onclick='cleanField(this)'>
                                    <svg class="delete-mark">
                                        <use xlink:href="#delete"></use> 
                                    </svg>
                                </label>    <!-- show-edit-btn -red -->
                                <input class='input-box' onchange="checkAllChanged(this)" type="number" min=0 name="zip" id="zip" />
                            </div>  <!-- data-id hidden area -->
                        </div>  
                    </section>  <!-- zip -->

                    <section class="row-item-85"><div class="gap-line"></div></section>

                    <section class="row-item-85">
                        <div class="fields-set">
                            <div class="field-title">Phone Number</div>
                            <div class="field-value"><%= user.dataCollection.phone %></div>
                        </div>
                        <div class="fields-set">
                            <label class="show-edit-btn" for='phone' onclick='toggleEditField(this)'>edit</label>
                            <div class="fields-set -hidden" name="data-coll-edits" data-id='phone'>
                                <label class="show-edit-btn -red" for='phone' onclick='cleanField(this)'>
                                    <svg class="delete-mark">
                                        <use xlink:href="#delete"></use> 
                                    </svg>
                                </label>    <!-- show-edit-btn -red -->
                                <input class='input-box' onchange="checkAllChanged(this)" type="number" min=0 name="phone" id="phone" pattern="[0-9]{10}" title="10 digits of your phone number">
                            </div>  <!-- data-id hidden area -->
                        </div>  
                    </section>  <!-- phone -->

                    <section class="row-item-85">
                        <div class="fields-set">
                            <div class="field-title">Date of birth</div>
                            <div class="field-value"><%= new Date(user.dataCollection.DOB).toLocaleDateString() %></div>
                        </div>
                        <div class="fields-set">
                            <label class="show-edit-btn" for='DOB' onclick='toggleEditField(this)'>edit</label>
                            <div class="fields-set -hidden" name="data-coll-edits" data-id='DOB'>
                                <label class="show-edit-btn -red" for='DOB' onclick='cleanField(this)'>
                                    <svg class="delete-mark">
                                        <use xlink:href="#delete"></use> 
                                    </svg>
                                </label>    <!-- show-edit-btn -red -->
                                <input class='input-box' onchange="checkAllChanged(this)" type="date" name="DOB" id="DOB">
                            </div>  <!-- data-id hidden area -->
                        </div>
                    </section>  <!-- Date of birth -->

                    <section class="row-item-85">
                        <div class="fields-set">
                            <div class="field-title">Social Security Number</div>
                            <div class="field-value"><%= user.dataCollection.SSN %></div>
                        </div>
                        <div class="fields-set">
                            <label class="show-edit-btn" for='SSN' onclick='toggleEditField(this)'>edit</label>
                            <div class="fields-set -hidden" name="data-coll-edits" data-id='SSN'>
                                <label class="show-edit-btn -red" for='SSN' onclick='cleanField(this)'>
                                    <svg class="delete-mark">
                                        <use xlink:href="#delete"></use> 
                                    </svg>
                                </label>    <!-- show-edit-btn -red -->
                                <input class='input-box' onchange="checkAllChanged(this)" type="number" name="SSN" id="SSN" pattern="[0-9]{9}" title="9 digits SSN">
                            </div>  <!-- data-id hidden area -->
                        </div>
                    </section>  <!-- SSN -->

                    <section class="row-item-85"><div class="gap-line"></div></section>

                    <section class="row-item-85">
                        <div class="fields-set">
                            <div class="field-title">race</div>
                            <div class="field-value"><%= user.dataCollection.race %></div>
                        </div>
                        <div class="fields-set">
                            <label class="show-edit-btn" for='race' onclick='toggleEditField(this)'>edit</label>
                            <div class="fields-set -hidden" name="data-coll-edits" data-id='race'>
                                <label class="show-edit-btn -red" for='race' onclick='cleanField(this)'>
                                    <svg class="delete-mark">
                                        <use xlink:href="#delete"></use> 
                                    </svg>
                                </label>    <!-- show-edit-btn -red -->
                                <select class='input-box' onchange="checkAllChanged(this)" name="race" id="race">
                                    <option value='DNU'>do not update</option>
                                    <optgroup label="top used">
                                        <option value='White/Caucasian'>White/Caucasian</option>
                                    </optgroup>
                                    <option value='Black/African American'>Black/African American</option>
                                    <option value='American Indian or Alaska Native'>American Indian or Alaska Native</option>
                                    <option value='Hawaiian Native or other Pacific Islander'>Hawaiian Native or other Pacific Islander</option>
                                    <option value='Asian'>Asian</option>
                                    <option value='Multiracial'>Multiracial</option>
                                    <option value='Other'>Other</option>
                                </select>
                            </div>  <!-- data-id hidden area -->
                        </div>
                    </section>  <!-- race -->

                    <section class="row-item-85">
                        <div class="fields-set">
                            <div class="field-title">hispanic</div>
                            <div class="field-value"><%= user.dataCollection.hispanic %></div>
                        </div>
                        <div class="fields-set">
                            <label class="show-edit-btn" for='hispanic' onclick='toggleEditField(this)'>edit</label>
                            <div class="fields-set -hidden" name="data-coll-edits" data-id='hispanic'>
                                <label class="show-edit-btn -red" for='hispanic' onclick='cleanField(this)'>
                                    <svg class="delete-mark">
                                        <use xlink:href="#delete"></use> 
                                    </svg>
                                </label>    <!-- show-edit-btn -red -->
                                <select class='input-box' onchange="checkAllChanged(this)" name="hispanic" id="hispanic">
                                    <option value='DNU'>do not update</option>
                                    <option value='Yes'>Yes</option>
                                    <option value='No'>No</option>
                                </select>
                            </div>  <!-- data-id hidden area -->
                        </div>
                    </section>  <!-- race -->

                    <section class="row-item-85">
                        <div class="fields-set">
                            <div class="field-title">disabled</div>
                            <div class="field-value"><%= user.dataCollection.disabled %></div>
                        </div>
                        <div class="fields-set">
                            <label class="show-edit-btn" for='disabled' onclick='toggleEditField(this)'>edit</label>
                            <div class="fields-set -hidden" name="data-coll-edits" data-id='disabled'>
                                <label class="show-edit-btn -red" for='disabled' onclick='cleanField(this)'>
                                    <svg class="delete-mark">
                                        <use xlink:href="#delete"></use> 
                                    </svg>
                                </label>    <!-- show-edit-btn -red -->
                                <select class='input-box' onchange="checkAllChanged(this)" name="disabled" id="disabled">
                                    <option value='DNU'>do not update</option>
                                    <option value='Yes'>Yes</option>
                                    <option value='No'>No</option>
                                </select>
                            </div>  <!-- data-id hidden area -->
                        </div>
                    </section>  <!-- disabled -->

                    <section class="row-item-85">
                        <div class="fields-set">
                            <div class="field-title">veteran</div>
                            <div class="field-value"><%= user.dataCollection.veteran %></div>
                        </div>
                        <div class="fields-set">
                            <label class="show-edit-btn" for='veteran' onclick='toggleEditField(this)'>edit</label>
                            <div class="fields-set -hidden" name="data-coll-edits" data-id='veteran'>
                                <label class="show-edit-btn -red" for='veteran' onclick='cleanField(this)'>
                                    <svg class="delete-mark">
                                        <use xlink:href="#delete"></use> 
                                    </svg>
                                </label>    <!-- show-edit-btn -red -->
                                <select class='input-box' onchange="checkAllChanged(this)" name="veteran" id="veteran">
                                    <option value='DNU'>do not update</option>
                                    <option value='Yes'>Yes</option>
                                    <option value='No'>No</option>
                                </select>
                            </div>  <!-- data-id hidden area -->
                        </div>
                    </section>  <!-- veteran -->

                    <section class="row-item-85">
                        <div class="fields-set">
                            <div class="field-title">gender</div>
                            <div class="field-value"><%= user.dataCollection.sex %></div>
                        </div>
                        <div class="fields-set">
                            <label class="show-edit-btn" for='sex' onclick='toggleEditField(this)'>edit</label>
                            <div class="fields-set -hidden" name="data-coll-edits" data-id='sex'>
                                <label class="show-edit-btn -red" for='sex' onclick='cleanField(this)'>
                                    <svg class="delete-mark">
                                        <use xlink:href="#delete"></use> 
                                    </svg>
                                </label>    <!-- show-edit-btn -red -->
                                <select class='input-box' onchange="checkAllChanged(this)" name="sex" id="sex">
                                    <option value='DNU'>do not update</option>
                                    <option value='Male'>Male</option>
                                    <option value='Female'>Female</option>
                                </select>
                            </div>  <!-- data-id hidden area -->
                        </div>
                    </section>  <!-- sex -->


                    <section class="row-item-85"><div class="gap-line"></div></section>

                    <section class="row-item-85">
                        <div class="fields-set">
                            <div class="field-title">education level</div>
                            <div class="field-value"><%= user.dataCollection.grade %></div>
                        </div>
                        <div class="fields-set">
                            <label class="show-edit-btn" for='grade' onclick='toggleEditField(this)'>edit</label>
                            <div class="fields-set -hidden" name="data-coll-edits" data-id='grade'>
                                <label class="show-edit-btn -red" for='grade' onclick='cleanField(this)'>
                                    <svg class="delete-mark">
                                        <use xlink:href="#delete"></use> 
                                    </svg>
                                </label>    <!-- show-edit-btn -red -->
                                <select class='input-box' onchange="checkAllChanged(this)" name="grade" id="grade">
                                    <option value='DNU'>do not update</option>
                                    <option value='Less than high school graduation'>Less than high school graduation</option>
                                    <option value='High school graduate'>High school graduate</option>
                                    <option value='GED'>GED</option>
                                    <option value='Some post high school, no degree/certificate'>Some post high school, no degree/certificate</option>
                                    <option value='Certificate (less than two years)'>Certificate (less than two years)</option>
                                    <option value='Associate’s Degree'>Associate’s Degree</option>
                                    <option value='Bachelor’s Degree'>Bachelor’s Degree</option>
                                    <option value='Master’s Degree'>Master’s Degree</option>
                                </select>
                            </div>  <!-- data-id hidden area -->
                        </div>
                    </section>  <!-- grade -->

                    <!-- contains all updated MODELS fields -->
                    <input type="hidden" name='whatWasUpdated'  data-updated='data-coll-edits' />

                    <!-- @SIGNATURE -->
                    <section class="row-item-85 -right-side">
                        <div class="field-title -windblow">completed as of</div>
                        <div class="field-value"><%= new Date(user.dataCollection.created).toLocaleDateString('en-US', { timeZone: 'America/Los_Angeles' }) %> (<%= new Date(user.dataCollection.created).toLocaleTimeString('en-US', { timeZone: 'America/Los_Angeles' }) %>)</div>
                    </section>
                    
                    <!-- @ADMIN CHANGED -->
                    <% if(user.dataCollection.updatedAdmin) { %>
                        <% let updater = user.dataCollection.updatedAdmin+' ' %>
                        <% updater += new Date(user.dataCollection.updatedDate).toLocaleDateString('en-US', { timeZone: 'America/Los_Angeles' }) %>
                        <% updater += '('+new Date(user.dataCollection.updatedDate).toLocaleTimeString('en-US', { timeZone: 'America/Los_Angeles' })+')' %>

                        <section class="row-item-85 -right-side">
                            <div class="field-title -windblow -orange">updated by</div>
                            <div class="field-value"><%= updater %></div>
                        </section>
                    <% } %>

                    <!-- @BUTTONS -->
                    <section class="row-item-85 -button-box">
                        <span class='-btn' onclick="print('<%= pdfObj %>')">Download</span>
                        <a class='-btn' href='/admin/print-form/<%= user._id %>?form=form1'>Print</a>
                        <button type='submit' class='-btn'>Update</button>
                    </section>

                </form>   <!-- block1 -->
            
            <% } else { %>
                <section class="row-item-85">
                    <div class="field-title -small">Data Collection form is not completed yet.</div>
                </section>
                <section class="row-item-85">
                    <div class="field-warning">Data Collection is one of the <span class="field-warning -bold">basic state required</span> enrollment forms. User should start with one to become an Applicant...</div>
                </section>
                <section class="row-item-85">
                    <div class="field-value -small">First of all, Users have to create their account and go through procedure of email verification to make forms available.</div>
                </section>
            <% } %>     <!-- if(user.dataCollection) -->

        </section>  <!-- block-box -->




        
        <!-- @APPLIVATION FORM  id=block2 -->
        <!-- EDIT group 'appl-edits' -->

        <section class="block-box -hidden" name='blockBox' id='block2'>
            <h2 class="block-header">Application Enrollment Form</h2>
            
            <% if(user.application) { %>
                
                <form action='/admin/update-form2/<%= user.application._id %>' method="post" class='block-box-inner' id='form2'>
            
                    <input type="hidden" name='postedPath' value='/admin/user/<%= user._id %>' />       <!-- path for getting back after updating -->

                    <section class="row-item-85">
                        <div class="fields-set">
                            <div class="field-title">Attraction Channel</div>
                            <div class="field-value"><%= user.application.channel %></div>
                        </div>
                        <div class="fields-set">
                            <label class="show-edit-btn" for='hdyfu' onclick='toggleEditField(this)'>edit</label>
                            <div class="fields-set -hidden" name="appl-edits" data-id='hdyfu'>
                                <label class="show-edit-btn -red" for='hdyfu' onclick='cleanField(this)'>
                                    <svg class="delete-mark">
                                        <use xlink:href="#delete"></use> 
                                    </svg>
                                </label>    <!-- show-edit-btn -red -->
                                <select class='input-box' onchange="checkAllChanged(this)" name="hdyfu" id="hdyfu" required>
                                    <option value='DNU'>do not update</option>
                                    <option value='Google Search'>Google Search</option>
                                    <option value='Vehicle Wrap Advertising'>Vehicle Wrap Advertising</option>
                                    <option value='Outdoor Advertising'>Outdoor Advertising</option>
                                    <option value='Walk In'>Walk In</option>
                                    <option value='Social Media'>Social Media</option>
                                    <option value='Personal Referral'>Personal Referral</option>
                                </select>
                            </div>  <!-- data-id hidden area -->
                        </div>    <!-- right side of row -->
                    </section>  <!-- hdyfu -->
                    
                   <!-- Referral Info -->
                    <section class="row-item-85">
                        <div class="fields-set">
                            <div class="field-title -orange">Referral Person Info:</div>
                        </div>
                    </section>

                    <section class="row-item-75">
                        <div class="fields-set">
                            <div class="field-title">Full Name</div>
                            <div class="field-value -italic"><%= user.application['ref-person-name'] %></div>
                        </div>
                        <div class="fields-set">
                            <label class="show-edit-btn" for='ref-person-name' onclick='toggleEditField(this)'>edit</label>
                            <div class="fields-set -hidden" name="appl-edits" data-id='ref-person-name'>
                                <label class="show-edit-btn -red" for='ref-person-name' onclick='cleanField(this)'>
                                    <svg class="delete-mark">
                                        <use xlink:href="#delete"></use> 
                                    </svg>
                                </label>    <!-- show-edit-btn -red -->
                                <input class='input-box' onchange="checkAllChanged(this)" type="text" name="ref-person-name" id="ref-person-name">
                            </div>  <!-- data-id hidden area -->
                        </div>    <!-- right side of row -->
                    </section>  <!-- ref-person-name -->

                    <section class="row-item-75">
                        <div class="fields-set">
                            <div class="field-title">Phone Number(Zelle)</div>
                            <div class="field-value -italic"><%= user.application['ref-person-phone'] %></div>
                        </div>
                        <div class="fields-set">
                            <label class="show-edit-btn" for='ref-person-phone' onclick='toggleEditField(this)'>edit</label>
                            <div class="fields-set -hidden" name="appl-edits" data-id='ref-person-phone'>
                                <label class="show-edit-btn -red" for='ref-person-phone' onclick='cleanField(this)'>
                                    <svg class="delete-mark">
                                        <use xlink:href="#delete"></use> 
                                    </svg>
                                </label>    <!-- show-edit-btn -red -->
                                <input class='input-box' onchange="checkAllChanged(this)" type="number" min=0 name="ref-person-phone" id="ref-person-phone" pattern="[0-9]{10}" title="10 digits phone number">
                            </div>  <!-- data-id hidden area -->
                        </div>    <!-- right side of row -->
                    </section>  <!-- ref-person-phone -->

                    <section class="row-item-75">
                        <div class="fields-set">
                            <div class="field-title">Email Address(Zelle)</div>
                            <div class="field-value -email -italic"><%= user.application['ref-person-email'] %></div>
                        </div>
                        <div class="fields-set">
                            <label class="show-edit-btn" for='ref-person-email' onclick='toggleEditField(this)'>edit</label>
                            <div class="fields-set -hidden" name="appl-edits" data-id='ref-person-email'>
                                <label class="show-edit-btn -red" for='ref-person-email' onclick='cleanField(this)'>
                                    <svg class="delete-mark">
                                        <use xlink:href="#delete"></use> 
                                    </svg>
                                </label>    <!-- show-edit-btn -red -->
                                <input class='input-box' onchange="checkAllChanged(this)" type="email" name="ref-person-email" id="ref-person-email" title="Zelle - based digital payments network. Can be used for prompt payments at Bank of America, BB&T, Capital One, JPMorgan Chase, PNC Bank, U.S. Bank and Wells Fargo.">
                            </div>  <!-- data-id hidden area -->
                        </div>    <!-- right side of row -->
                    </section>  <!-- ref-person-email -->

                    <section class="row-item-85"><div class="gap-line"></div></section>


                    <!-- Emergency Info -->
                    <section class="row-item-85">
                        <div class="fields-set">
                            <div class="field-title -orange">EMERGENCY CONTACTS:</div>
                        </div>
                    </section>

                    <section class="row-item-85">
                        <div class="fields-set">
                            <div class="field-title">Emergency Contact</div>
                            <div class="field-value"><%= user.application['emerg-person-name'] %></div>
                        </div>
                        <div class="fields-set">
                            <label class="show-edit-btn" for='emerg-person-name' onclick='toggleEditField(this)'>edit</label>
                            <div class="fields-set -hidden" name="appl-edits" data-id='emerg-person-name'>
                                <label class="show-edit-btn -red" for='emerg-person-name' onclick='cleanField(this)'>
                                    <svg class="delete-mark">
                                        <use xlink:href="#delete"></use> 
                                    </svg>
                                </label>    <!-- show-edit-btn -red -->
                                <input class='input-box' onchange="checkAllChanged(this)" type="text" name="emerg-person-name" id="emerg-person-name">
                            </div>  <!-- data-id hidden area -->
                        </div>    <!-- right side of row -->
                    </section>  <!-- emerg-person-name -->

                    <section class="row-item-85">
                        <div class="fields-set">
                            <div class="field-title">Phone Number</div>
                            <div class="field-value"><%= user.application['emerg-person-phone'] %></div>
                        </div>
                        <div class="fields-set">
                            <label class="show-edit-btn" for='emerg-person-phone' onclick='toggleEditField(this)'>edit</label>
                            <div class="fields-set -hidden" name="appl-edits" data-id='emerg-person-phone'>
                                <label class="show-edit-btn -red" for='emerg-person-phone' onclick='cleanField(this)'>
                                    <svg class="delete-mark">
                                        <use xlink:href="#delete"></use> 
                                    </svg>
                                </label>    <!-- show-edit-btn -red -->
                                <input class='input-box' onchange="checkAllChanged(this)" type="number" min=0 name="emerg-person-phone" id="emerg-person-phone" pattern="[0-9]{10}" title="10 digits phone number">
                            </div>  <!-- data-id hidden area -->
                        </div>    <!-- right side of row -->
                    </section>  <!-- emerg-person-phone -->

                    <section class="row-item-85">
                        <div class="fields-set">
                            <div class="field-title">Relationship</div>
                            <div class="field-value"><%= user.application['emerg-person-relation'] %></div>
                        </div>
                        <div class="fields-set">
                            <label class="show-edit-btn" for='emerg-person-relation' onclick='toggleEditField(this)'>edit</label>
                            <div class="fields-set -hidden" name="appl-edits" data-id='emerg-person-relation'>
                                <label class="show-edit-btn -red" for='emerg-person-relation' onclick='cleanField(this)'>
                                    <svg class="delete-mark">
                                        <use xlink:href="#delete"></use> 
                                    </svg>
                                </label>    <!-- show-edit-btn -red -->
                                <input class='input-box' onchange="checkAllChanged(this)" type="text" name="emerg-person-relation" id="emerg-person-relation">
                            </div>  <!-- data-id hidden area -->
                        </div>    <!-- right side of row -->
                    </section>  <!-- emerg-person-relation -->

                    <section class="row-item-75">
                        <div class="fields-set">
                            <div class="field-title -orange">Emergency Contact Address:</div>
                        </div>
                    </section>

                    <section class="row-item-75">
                        <div class="fields-set">
                            <div class="field-title">Street</div>
                            <div class="field-value"><%= user.application['emerg-person-street'] %></div>
                        </div>
                        <div class="fields-set">
                            <label class="show-edit-btn" for='emerg-person-street' onclick='toggleEditField(this)'>edit</label>
                            <div class="fields-set -hidden" name="appl-edits" data-id='emerg-person-street'>
                                <label class="show-edit-btn -red" for='emerg-person-street' onclick='cleanField(this)'>
                                    <svg class="delete-mark">
                                        <use xlink:href="#delete"></use> 
                                    </svg>
                                </label>    <!-- show-edit-btn -red -->
                                <input class='input-box' onchange="checkAllChanged(this)" type="text" name="emerg-person-street" id="emerg-person-street">
                            </div>  <!-- data-id hidden area -->
                        </div>    <!-- right side of row -->
                    </section>  <!-- emerg-person-street -->

                    <section class="row-item-75">
                        <div class="fields-set">
                            <div class="field-title">City</div>
                            <div class="field-value"><%= user.application['emerg-person-city'] %></div>
                        </div>
                        <div class="fields-set">
                            <label class="show-edit-btn" for='emerg-person-city' onclick='toggleEditField(this)'>edit</label>
                            <div class="fields-set -hidden" name="appl-edits" data-id='emerg-person-city'>
                                <label class="show-edit-btn -red" for='emerg-person-city' onclick='cleanField(this)'>
                                    <svg class="delete-mark">
                                        <use xlink:href="#delete"></use> 
                                    </svg>
                                </label>    <!-- show-edit-btn -red -->
                                <input class='input-box' onchange="checkAllChanged(this)" type="text" name="emerg-person-city" id="emerg-person-city">
                            </div>  <!-- data-id hidden area -->
                        </div>    <!-- right side of row -->
                    </section>  <!-- emerg-person-city -->

                    <section class="row-item-75">
                        <div class="fields-set">
                            <div class="field-title">State</div>
                            <div class="field-value"><%= user.application['emerg-person-state'] %></div>
                        </div>
                        <div class="fields-set">
                            <label class="show-edit-btn" for='emerg-person-state' onclick='toggleEditField(this)'>edit</label>
                            <div class="fields-set -hidden" name="appl-edits" data-id='emerg-person-state'>
                                <label class="show-edit-btn -red" for='emerg-person-state' onclick='cleanField(this)'>
                                    <svg class="delete-mark">
                                        <use xlink:href="#delete"></use> 
                                    </svg>
                                </label>    <!-- show-edit-btn -red -->
                                <select autocomplete="off" class='input-box' onchange="checkAllChanged(this)" name="emerg-person-state" id="emerg-person-state">
                                    <option value='DNU'>do not update</option>
                                    <optgroup label="locations">
                                        <option value='Washington'>Washington</option>
                                    </optgroup>
                                    <option value='Alaska'>Alaska</option>
                                    <option value='Alabama'>Alabama</option>
                                    <option value='Arkansas'>Arkansas</option>
                                    <option value='Arizona'>Arizona</option>
                                    <option value='California'>California</option>
                                    <option value='Colorado'>Colorado</option>
                                    <option value='Connecticut'>Connecticut</option>
                                    <option value='Washington DC'>Washington DC</option>
                                    <option value='Delaware'>Delaware</option>
                                    <option value='Florida'>Florida</option>
                                    <option value='Georgia'>Georgia</option>
                                    <option value='Hawaii'>Hawaii</option>
                                    <option value='Iowa'>Iowa</option>
                                    <option value='Idaho'>Idaho</option>
                                    <option value='Illinois'>Illinois</option>
                                    <option value='Indiana'>Indiana</option>
                                    <option value='Kansas'>Kansas</option>
                                    <option value='Kentucky'>Kentucky</option>
                                    <option value='Louisiana'>Louisiana</option>
                                    <option value='Massachusetts'>Massachusetts</option>
                                    <option value='Maryland'>Maryland</option>
                                    <option value='Maine'>Maine</option>
                                    <option value='Michigan'>Michigan</option>
                                    <option value='Minnesota'>Minnesota</option>
                                    <option value='Missouri'>Missouri</option>
                                    <option value='Mississippi'>Mississippi</option>
                                    <option value='Montana'>Montana</option>
                                    <option value='North Carolina'>North Carolina</option>
                                    <option value='North Dakota'>North Dakota</option>
                                    <option value='Nebraska'>Nebraska</option>
                                    <option value='New Hampshire'>New Hampshire</option>
                                    <option value='New Jersey'>New Jersey</option>
                                    <option value='New Mexico'>New Mexico</option>
                                    <option value='Nevada'>Nevada</option>
                                    <option value='New York'>New York</option>
                                    <option value='Ohio'>Ohio</option>
                                    <option value='Oklahoma'>Oklahoma</option>
                                    <option value='Oregon'>Oregon</option>
                                    <option value='Pennsylvania'>Pennsylvania</option>
                                    <option value='Rhode Island'>Rhode Island</option>
                                    <option value='South Carolina'>South Carolina</option>
                                    <option value='South Dakota'>South Dakota</option>
                                    <option value='Tennessee'>Tennessee</option>
                                    <option value='Texas'>Texas</option>
                                    <option value='Utah'>Utah</option>
                                    <option value='Virginia'>Virginia</option>
                                    <option value='Vermont'>Vermont</option>
                                    <option value='Wisconsin'>Wisconsin</option>
                                    <option value='West Virginia'>West Virginia</option>
                                    <option value='Wyoming'>Wyoming</option>
                                </select>
                            </div>  <!-- data-id hidden area -->
                        </div>    <!-- right side of row -->
                    </section>  <!-- emerg-person-state -->

                    <section class="row-item-75">
                        <div class="fields-set">
                            <div class="field-title">Zip</div>
                            <div class="field-value"><%= user.application['emerg-person-zip'] %></div>
                        </div>
                        <div class="fields-set">
                            <label class="show-edit-btn" for='emerg-person-zip' onclick='toggleEditField(this)'>edit</label>
                            <div class="fields-set -hidden" name="appl-edits" data-id='emerg-person-zip'>
                                <label class="show-edit-btn -red" for='emerg-person-zip' onclick='cleanField(this)'>
                                    <svg class="delete-mark">
                                        <use xlink:href="#delete"></use> 
                                    </svg>
                                </label>    <!-- show-edit-btn -red -->
                                <input class='input-box' onchange="checkAllChanged(this)" type="number" min=0 name="emerg-person-zip" id="emerg-person-zip">
                            </div>  <!-- data-id hidden area -->
                        </div>    <!-- right side of row -->
                    </section>  <!-- emerg-person-zip -->


                    
                    <section class="row-item-85"><div class="gap-line"></div></section>
                    
                    
                    <!-- Education info -->
                    <section class="row-item-85">
                        <div class="fields-set">
                            <div class="field-title">EDUCATION INFO:</div>
                        </div>
                    </section>

                    <section class="row-item-85">
                        <div class="fields-set">
                            <div class="field-title">Highest Grade Completed</div>
                            <div class="field-value"><%= user.application['education-highest-grade'] %></div>
                        </div>
                        <div class="fields-set">
                            <label class="show-edit-btn" for='education-highest-grade' onclick='toggleEditField(this)'>edit</label>
                            <div class="fields-set -hidden" name="appl-edits" data-id='education-highest-grade'>
                                <label class="show-edit-btn -red" for='education-highest-grade' onclick='cleanField(this)'>
                                    <svg class="delete-mark">
                                        <use xlink:href="#delete"></use> 
                                    </svg>
                                </label>    <!-- show-edit-btn -red -->
                                <input class='input-box' onchange="checkAllChanged(this)" type="number" min=1 max=12 name="education-highest-grade" id="education-highest-grade" title='MAX - 12'>
                            </div>  <!-- data-id hidden area -->
                        </div>    <!-- right side of row -->
                    </section>  <!-- education-highest-grade -->

                    <section class="row-item-85">
                        <div class="fields-set">
                            <div class="field-title">College</div>
                            <div class="field-value"><%= user.application['education-colledge'] %></div>
                        </div>
                        <div class="fields-set">
                            <label class="show-edit-btn" for='education-colledge' onclick='toggleEditField(this)'>edit</label>
                            <div class="fields-set -hidden" name="appl-edits" data-id='education-colledge'>
                                <label class="show-edit-btn -red" for='education-colledge' onclick='cleanField(this)'>
                                    <svg class="delete-mark">
                                        <use xlink:href="#delete"></use> 
                                    </svg>
                                </label>    <!-- show-edit-btn -red -->
                                <input class='input-box' onchange="checkAllChanged(this)" type="number" min=1 max=4 name="education-colledge" id="education-colledge" title='MAX-4'>
                            </div>  <!-- data-id hidden area -->
                        </div>    <!-- right side of row -->
                    </section>  <!-- education-colledge -->

                    <section class="row-item-85">
                        <div class="fields-set">
                            <div class="field-title">High School Graduate?</div>
                            <div class="field-value"><%= user.application.highSchoolGrade %></div>
                        </div>
                        <div class="fields-set">
                            <label class="show-edit-btn" for='highSchoolGrade' onclick='toggleEditField(this)'>edit</label>
                            <div class="fields-set -hidden" name="appl-edits" data-id='highSchoolGrade'>
                                <label class="show-edit-btn -red" for='highSchoolGrade' onclick='cleanField(this)'>
                                    <svg class="delete-mark">
                                        <use xlink:href="#delete"></use> 
                                    </svg>
                                </label>    <!-- show-edit-btn -red -->
                                <select class='input-box' onchange="checkAllChanged(this)" name="highSchoolGrade" id="highSchoolGrade">
                                    <option value='DNU'>do not update</option>
                                    <option value='Yes'>Yes</option>
                                    <option value='No'>No</option>
                                </select>
                            </div>  <!-- data-id hidden area -->
                        </div>    <!-- right side of row -->
                    </section>  <!-- highSchoolGrade -->

                    <section class="row-item-85">
                        <div class="fields-set">
                            <div class="field-title">Graduation or GED Completion Date</div>
                            <div class="field-value"><%= new Date(user.application['education-grade-date']).toLocaleDateString('en-US', { timeZone: 'America/Los_Angeles' }) %></div>
                        </div>
                        <div class="fields-set">
                            <label class="show-edit-btn" for='education-grade-date' onclick='toggleEditField(this)'>edit</label>
                            <div class="fields-set -hidden" name="appl-edits" data-id='education-grade-date'>
                                <label class="show-edit-btn -red" for='education-grade-date' onclick='cleanField(this)'>
                                    <svg class="delete-mark">
                                        <use xlink:href="#delete"></use> 
                                    </svg>
                                </label>    <!-- show-edit-btn -red -->
                                <input class='input-box' onchange="checkAllChanged(this)" type="date" name="education-grade-date" id="education-grade-date">
                            </div>  <!-- data-id hidden area -->
                        </div>    <!-- right side of row -->
                    </section>  <!-- education-grade-date -->

                    <section class="row-item-75">
                        <div class="fields-set">
                            <div class="field-title">Last School Attended</div>
                            <div class="field-value"><%= user.application['education-last-school'] %></div>
                        </div>
                        <div class="fields-set">
                            <label class="show-edit-btn" for='education-last-school' onclick='toggleEditField(this)'>edit</label>
                            <div class="fields-set -hidden" name="appl-edits" data-id='education-last-school'>
                                <label class="show-edit-btn -red" for='education-last-school' onclick='cleanField(this)'>
                                    <svg class="delete-mark">
                                        <use xlink:href="#delete"></use> 
                                    </svg>
                                </label>    <!-- show-edit-btn -red -->
                                <input class='input-box' onchange="checkAllChanged(this)" type="text" name="education-last-school" id="education-last-school">
                            </div>  <!-- data-id hidden area -->
                        </div>    <!-- right side of row -->
                    </section>  <!-- education-last-school -->

                    <section class="row-item-75">
                        <div class="fields-set">
                            <div class="field-title">Degrees/Certificates</div>
                            <div class="field-value"><%= user.application['education-last-school-degree'] %></div>
                        </div>
                        <div class="fields-set">
                            <label class="show-edit-btn" for='education-last-school-degree' onclick='toggleEditField(this)'>edit</label>
                            <div class="fields-set -hidden" name="appl-edits" data-id='education-last-school-degree'>
                                <label class="show-edit-btn -red" for='education-last-school-degree' onclick='cleanField(this)'>
                                    <svg class="delete-mark">
                                        <use xlink:href="#delete"></use> 
                                    </svg>
                                </label>    <!-- show-edit-btn -red -->
                                <input class='input-box' onchange="checkAllChanged(this)" type="text" name="education-last-school-degree" id="education-last-school-degree">
                            </div>  <!-- data-id hidden area -->
                        </div>    <!-- right side of row -->
                    </section>  <!-- education-last-school-degree -->

                    <section class="row-item-75">
                        <div class="fields-set">
                            <div class="field-title">Street Address</div>
                            <div class="field-value"><%= user.application['education-last-school-street'] %></div>
                        </div>
                        <div class="fields-set">
                            <label class="show-edit-btn" for='education-last-school-street' onclick='toggleEditField(this)'>edit</label>
                            <div class="fields-set -hidden" name="appl-edits" data-id='education-last-school-street'>
                                <label class="show-edit-btn -red" for='education-last-school-street' onclick='cleanField(this)'>
                                    <svg class="delete-mark">
                                        <use xlink:href="#delete"></use> 
                                    </svg>
                                </label>    <!-- show-edit-btn -red -->
                                <input class='input-box' onchange="checkAllChanged(this)" type="text" name="education-last-school-street" id="education-last-school-street">
                            </div>  <!-- data-id hidden area -->
                        </div>    <!-- right side of row -->
                    </section>  <!-- education-last-school-street -->

                    <section class="row-item-75">
                        <div class="fields-set">
                            <div class="field-title">City</div>
                            <div class="field-value"><%= user.application['education-last-school-city'] %></div>
                        </div>
                        <div class="fields-set">
                            <label class="show-edit-btn" for='education-last-school-city' onclick='toggleEditField(this)'>edit</label>
                            <div class="fields-set -hidden" name="appl-edits" data-id='education-last-school-city'>
                                <label class="show-edit-btn -red" for='education-last-school-city' onclick='cleanField(this)'>
                                    <svg class="delete-mark">
                                        <use xlink:href="#delete"></use> 
                                    </svg>
                                </label>    <!-- show-edit-btn -red -->
                                <input class='input-box' onchange="checkAllChanged(this)" type="text" name="education-last-school-city" id="education-last-school-city">
                            </div>  <!-- data-id hidden area -->
                        </div>    <!-- right side of row -->
                    </section>  <!-- education-last-school-city -->

                    <section class="row-item-75">
                        <div class="fields-set">
                            <div class="field-title">State/Province/Region</div>
                            <div class="field-value"><%= user.application['education-last-school-state'] %></div>
                        </div>
                        <div class="fields-set">
                            <label class="show-edit-btn" for='education-last-school-state' onclick='toggleEditField(this)'>edit</label>
                            <div class="fields-set -hidden" name="appl-edits" data-id='education-last-school-state'>
                                <label class="show-edit-btn -red" for='education-last-school-state' onclick='cleanField(this)'>
                                    <svg class="delete-mark">
                                        <use xlink:href="#delete"></use> 
                                    </svg>
                                </label>    <!-- show-edit-btn -red -->
                                <select autocomplete="off" class='input-box' onchange="checkAllChanged(this)" name="education-last-school-state" id="education-last-school-state">
                                    <option value='DNU'>do not update</option>
                                    <optgroup label="locations">
                                        <option value='Washington'>Washington</option>
                                    </optgroup>
                                    <option value='Alaska'>Alaska</option>
                                    <option value='Alabama'>Alabama</option>
                                    <option value='Arkansas'>Arkansas</option>
                                    <option value='Arizona'>Arizona</option>
                                    <option value='California'>California</option>
                                    <option value='Colorado'>Colorado</option>
                                    <option value='Connecticut'>Connecticut</option>
                                    <option value='Washington DC'>Washington DC</option>
                                    <option value='Delaware'>Delaware</option>
                                    <option value='Florida'>Florida</option>
                                    <option value='Georgia'>Georgia</option>
                                    <option value='Hawaii'>Hawaii</option>
                                    <option value='Iowa'>Iowa</option>
                                    <option value='Idaho'>Idaho</option>
                                    <option value='Illinois'>Illinois</option>
                                    <option value='Indiana'>Indiana</option>
                                    <option value='Kansas'>Kansas</option>
                                    <option value='Kentucky'>Kentucky</option>
                                    <option value='Louisiana'>Louisiana</option>
                                    <option value='Massachusetts'>Massachusetts</option>
                                    <option value='Maryland'>Maryland</option>
                                    <option value='Maine'>Maine</option>
                                    <option value='Michigan'>Michigan</option>
                                    <option value='Minnesota'>Minnesota</option>
                                    <option value='Missouri'>Missouri</option>
                                    <option value='Mississippi'>Mississippi</option>
                                    <option value='Montana'>Montana</option>
                                    <option value='North Carolina'>North Carolina</option>
                                    <option value='North Dakota'>North Dakota</option>
                                    <option value='Nebraska'>Nebraska</option>
                                    <option value='New Hampshire'>New Hampshire</option>
                                    <option value='New Jersey'>New Jersey</option>
                                    <option value='New Mexico'>New Mexico</option>
                                    <option value='Nevada'>Nevada</option>
                                    <option value='New York'>New York</option>
                                    <option value='Ohio'>Ohio</option>
                                    <option value='Oklahoma'>Oklahoma</option>
                                    <option value='Oregon'>Oregon</option>
                                    <option value='Pennsylvania'>Pennsylvania</option>
                                    <option value='Rhode Island'>Rhode Island</option>
                                    <option value='South Carolina'>South Carolina</option>
                                    <option value='South Dakota'>South Dakota</option>
                                    <option value='Tennessee'>Tennessee</option>
                                    <option value='Texas'>Texas</option>
                                    <option value='Utah'>Utah</option>
                                    <option value='Virginia'>Virginia</option>
                                    <option value='Vermont'>Vermont</option>
                                    <option value='Wisconsin'>Wisconsin</option>
                                    <option value='West Virginia'>West Virginia</option>
                                    <option value='Wyoming'>Wyoming</option>
                                </select>
                            </div>  <!-- data-id hidden area -->
                        </div>    <!-- right side of row -->
                    </section>  <!-- education-last-school-state -->

                    <section class="row-item-75">
                        <div class="fields-set">
                            <div class="field-title">Postal/Zip Code</div>
                            <div class="field-value"><%= user.application['education-last-school-zip'] %></div>
                        </div>
                        <div class="fields-set">
                            <label class="show-edit-btn" for='education-last-school-zip' onclick='toggleEditField(this)'>edit</label>
                            <div class="fields-set -hidden" name="appl-edits" data-id='education-last-school-zip'>
                                <label class="show-edit-btn -red" for='education-last-school-zip' onclick='cleanField(this)'>
                                    <svg class="delete-mark">
                                        <use xlink:href="#delete"></use> 
                                    </svg>
                                </label>    <!-- show-edit-btn -red -->
                                <input class='input-box' onchange="checkAllChanged(this)" type="number" min=0 name="education-last-school-zip" id="education-last-school-zip">
                            </div>  <!-- data-id hidden area -->
                        </div>    <!-- right side of row -->
                    </section>  <!-- education-last-school-zip -->


                    <section class="row-item-85"><div class="gap-line"></div></section>


                    <!-- Military info -->
                    <section class="row-item-85">
                        <div class="fields-set">
                            <div class="field-title">MILITARY STATUS:</div>
                        </div>
                    </section>

                    <section class="row-item-85">
                        <div class="fields-set">
                            <div class="field-title">Branch of Service</div>
                            <div class="field-value"><%= user.application['military-branch'] %></div>
                        </div>
                        <div class="fields-set">
                            <label class="show-edit-btn" for='military-branch' onclick='toggleEditField(this)'>edit</label>
                            <div class="fields-set -hidden" name="appl-edits" data-id='military-branch'>
                                <label class="show-edit-btn -red" for='military-branch' onclick='cleanField(this)'>
                                    <svg class="delete-mark">
                                        <use xlink:href="#delete"></use> 
                                    </svg>
                                </label>    <!-- show-edit-btn -red -->
                                <input class='input-box' onchange="checkAllChanged(this)" type="text" name="military-branch" id="military-branch">
                            </div>  <!-- data-id hidden area -->
                        </div>    <!-- right side of row -->
                    </section>  <!-- military-branch -->

                    <section class="row-item-85">
                        <div class="fields-set">
                            <div class="field-title">FROM and TO</div>
                            <div class="field-value"><%= user.application['military-from-to'] %></div>
                        </div>
                        <div class="fields-set">
                            <label class="show-edit-btn" for='military-from-to' onclick='toggleEditField(this)'>edit</label>
                            <div class="fields-set -hidden" name="appl-edits" data-id='military-from-to'>
                                <label class="show-edit-btn -red" for='military-branch' onclick='cleanField(this)'>
                                    <svg class="delete-mark">
                                        <use xlink:href="#delete"></use> 
                                    </svg>
                                </label>    <!-- show-edit-btn -red -->
                                <input class='input-box' onchange="checkAllChanged(this)" type="text" name="military-from-to" id="military-from-to">
                            </div>  <!-- data-id hidden area -->
                        </div>    <!-- right side of row -->
                    </section>  <!-- military-from-to -->

                    <section class="row-item-85">
                        <div class="fields-set">
                            <div class="field-title">Rank at Discharge</div>
                            <div class="field-value"><%= user.application['military-rank'] %></div>
                        </div>
                        <div class="fields-set">
                            <label class="show-edit-btn" for='military-rank' onclick='toggleEditField(this)'>edit</label>
                            <div class="fields-set -hidden" name="appl-edits" data-id='military-rank'>
                                <label class="show-edit-btn -red" for='military-rank' onclick='cleanField(this)'>
                                    <svg class="delete-mark">
                                        <use xlink:href="#delete"></use> 
                                    </svg>
                                </label>    <!-- show-edit-btn -red -->
                                <input class='input-box' onchange="checkAllChanged(this)" type="text" name="military-rank" id="military-rank">
                            </div>  <!-- data-id hidden area -->
                        </div>    <!-- right side of row -->
                    </section>  <!-- military-rank -->

                    <section class="row-item-85">
                        <div class="fields-set">
                            <div class="field-title">Date of Discharge</div>
                            <div class="field-value"><%= user.application['military-discharge-date'] %></div>
                        </div>
                        <div class="fields-set">
                            <label class="show-edit-btn" for='military-discharge-date' onclick='toggleEditField(this)'>edit</label>
                            <div class="fields-set -hidden" name="appl-edits" data-id='military-discharge-date'>
                                <label class="show-edit-btn -red" for='military-discharge-date' onclick='cleanField(this)'>
                                    <svg class="delete-mark">
                                        <use xlink:href="#delete"></use> 
                                    </svg>
                                </label>    <!-- show-edit-btn -red -->
                                <input class='input-box' onchange="checkAllChanged(this)" type="date" name="military-discharge-date" id="military-discharge-date">
                            </div>  <!-- data-id hidden area -->
                        </div>    <!-- right side of row -->
                    </section>  <!-- military-discharge-date -->


                    <section class="row-item-85"><div class="gap-line"></div></section>


                    <!-- License info -->
                    <section class="row-item-85">
                        <div class="fields-set">
                            <div class="field-title">MOTOR VEHICLE LICENSES HELD:</div>
                        </div>
                    </section>

                    <section class="row-item-85">
                        <div class="fields-set">
                            <div class="field-title">License</div>
                            <div class="field-value"><%= user.application['vehicle-license'] %></div>
                        </div>
                        <div class="fields-set">
                            <label class="show-edit-btn" for='vehicle-license' onclick='toggleEditField(this)'>edit</label>
                            <div class="fields-set -hidden" name="appl-edits" data-id='vehicle-license'>
                                <label class="show-edit-btn -red" for='vehicle-license' onclick='cleanField(this)'>
                                    <svg class="delete-mark">
                                        <use xlink:href="#delete"></use> 
                                    </svg>
                                </label>    <!-- show-edit-btn -red -->
                                <input class='input-box' onchange="checkAllChanged(this)" type="text" name="vehicle-license" id="vehicle-license">
                            </div>  <!-- data-id hidden area -->
                        </div>    <!-- right side of row -->
                    </section>  <!-- vehicle-license -->

                    <section class="row-item-85">
                        <div class="fields-set">
                            <div class="field-title">State</div>
                            <div class="field-value"><%= user.application['vehicle-license-state'] %></div>
                        </div>
                        <div class="fields-set">
                            <label class="show-edit-btn" for='vehicle-license-state' onclick='toggleEditField(this)'>edit</label>
                            <div class="fields-set -hidden" name="appl-edits" data-id='vehicle-license-state'>
                                <label class="show-edit-btn -red" for='vehicle-license-state' onclick='cleanField(this)'>
                                    <svg class="delete-mark">
                                        <use xlink:href="#delete"></use> 
                                    </svg>
                                </label>    <!-- show-edit-btn -red -->
                                <select autocomplete="off" class='input-box' onchange="checkAllChanged(this)" name="vehicle-license-state" id="vehicle-license-state">
                                    <option value='DNU'>do not update</option>
                                    <optgroup label="locations">
                                        <option value='Washington'>Washington</option>
                                    </optgroup>
                                    <option value='Alaska'>Alaska</option>
                                    <option value='Alabama'>Alabama</option>
                                    <option value='Arkansas'>Arkansas</option>
                                    <option value='Arizona'>Arizona</option>
                                    <option value='California'>California</option>
                                    <option value='Colorado'>Colorado</option>
                                    <option value='Connecticut'>Connecticut</option>
                                    <option value='Washington DC'>Washington DC</option>
                                    <option value='Delaware'>Delaware</option>
                                    <option value='Florida'>Florida</option>
                                    <option value='Georgia'>Georgia</option>
                                    <option value='Hawaii'>Hawaii</option>
                                    <option value='Iowa'>Iowa</option>
                                    <option value='Idaho'>Idaho</option>
                                    <option value='Illinois'>Illinois</option>
                                    <option value='Indiana'>Indiana</option>
                                    <option value='Kansas'>Kansas</option>
                                    <option value='Kentucky'>Kentucky</option>
                                    <option value='Louisiana'>Louisiana</option>
                                    <option value='Massachusetts'>Massachusetts</option>
                                    <option value='Maryland'>Maryland</option>
                                    <option value='Maine'>Maine</option>
                                    <option value='Michigan'>Michigan</option>
                                    <option value='Minnesota'>Minnesota</option>
                                    <option value='Missouri'>Missouri</option>
                                    <option value='Mississippi'>Mississippi</option>
                                    <option value='Montana'>Montana</option>
                                    <option value='North Carolina'>North Carolina</option>
                                    <option value='North Dakota'>North Dakota</option>
                                    <option value='Nebraska'>Nebraska</option>
                                    <option value='New Hampshire'>New Hampshire</option>
                                    <option value='New Jersey'>New Jersey</option>
                                    <option value='New Mexico'>New Mexico</option>
                                    <option value='Nevada'>Nevada</option>
                                    <option value='New York'>New York</option>
                                    <option value='Ohio'>Ohio</option>
                                    <option value='Oklahoma'>Oklahoma</option>
                                    <option value='Oregon'>Oregon</option>
                                    <option value='Pennsylvania'>Pennsylvania</option>
                                    <option value='Rhode Island'>Rhode Island</option>
                                    <option value='South Carolina'>South Carolina</option>
                                    <option value='South Dakota'>South Dakota</option>
                                    <option value='Tennessee'>Tennessee</option>
                                    <option value='Texas'>Texas</option>
                                    <option value='Utah'>Utah</option>
                                    <option value='Virginia'>Virginia</option>
                                    <option value='Vermont'>Vermont</option>
                                    <option value='Wisconsin'>Wisconsin</option>
                                    <option value='West Virginia'>West Virginia</option>
                                    <option value='Wyoming'>Wyoming</option>
                                </select>
                            </div>  <!-- data-id hidden area -->
                        </div>    <!-- right side of row -->
                    </section>  <!-- vehicle-license-state -->


                    <section class="row-item-85"><div class="gap-line"></div></section>


                    <!-- Accidents info -->

                    <section class="row-item-85">
                        <div class="fields-set">
                            <div class="field-title -orange">ACCIDENT RECORDS:</div>
                        </div>
                    </section>

                    <section class="row-item-75">
                        <div class="fields-set">
                            <div class="field-title">1. Date of Accident. State. Nature of Accident. Fault.</div>
                            <div class="field-value -orange"><%= user.application['accident-record1'] %></div>
                        </div>
                        <div class="fields-set">
                            <label class="show-edit-btn" for='accident-record1' onclick='toggleEditField(this)'>edit</label>
                            <div class="fields-set -hidden" name="appl-edits" data-id='accident-record1'>
                                <label class="show-edit-btn -red" for='accident-record1' onclick='cleanField(this)'>
                                    <svg class="delete-mark">
                                        <use xlink:href="#delete"></use> 
                                    </svg>
                                </label>    <!-- show-edit-btn -red -->
                                <input class='input-box' onchange="checkAllChanged(this)" type="text" name="accident-record1" id="accident-record1">
                            </div>  <!-- data-id hidden area -->
                        </div>    <!-- right side of row -->
                    </section>  <!-- accident-record1 -->

                    <section class="row-item-75">
                        <div class="fields-set">
                            <div class="field-title">2. Date of Accident. State. Nature of Accident. Fault.</div>
                            <div class="field-value -orange"><%= user.application['accident-record2'] %></div>
                        </div>
                        <div class="fields-set">
                            <label class="show-edit-btn" for='accident-record2' onclick='toggleEditField(this)'>edit</label>
                            <div class="fields-set -hidden" name="appl-edits" data-id='accident-record2'>
                                <label class="show-edit-btn -red" for='accident-record2' onclick='cleanField(this)'>
                                    <svg class="delete-mark">
                                        <use xlink:href="#delete"></use> 
                                    </svg>
                                </label>    <!-- show-edit-btn -red -->
                                <input class='input-box' onchange="checkAllChanged(this)" type="text" name="accident-record2" id="accident-record2">
                            </div>  <!-- data-id hidden area -->
                        </div>    <!-- right side of row -->
                    </section>  <!-- accident-record2 -->

                    <section class="row-item-75">
                        <div class="fields-set">
                            <div class="field-title">3. Date of Accident. State. Nature of Accident. Fault.</div>
                            <div class="field-value -orange"><%= user.application['accident-record3'] %></div>
                        </div>
                        <div class="fields-set">
                            <label class="show-edit-btn" for='accident-record3' onclick='toggleEditField(this)'>edit</label>
                            <div class="fields-set -hidden" name="appl-edits" data-id='accident-record3'>
                                <label class="show-edit-btn -red" for='accident-record3' onclick='cleanField(this)'>
                                    <svg class="delete-mark">
                                        <use xlink:href="#delete"></use> 
                                    </svg>
                                </label>    <!-- show-edit-btn -red -->
                                <input class='input-box' onchange="checkAllChanged(this)" type="text" name="accident-record3" id="accident-record3">
                            </div>  <!-- data-id hidden area -->
                        </div>    <!-- right side of row -->
                    </section>  <!-- accident-record3 -->


                    <section class="row-item-85"><div class="gap-line"></div></section>


                    <!-- TRAFFIC CONVICTIONS -->

                    <section class="row-item-85">
                        <div class="fields-set">
                            <div class="field-title -orange">TRAFFIC CONVICTIONS:</div>
                        </div>
                    </section>

                    <section class="row-item-75">
                        <div class="fields-set">
                            <div class="field-title">1. Date. State. Violation. Penalty.</div>
                            <div class="field-value -orange"><%= user.application['conviction-record1'] %></div>
                        </div>
                        <div class="fields-set">
                            <label class="show-edit-btn" for='conviction-record1' onclick='toggleEditField(this)'>edit</label>
                            <div class="fields-set -hidden" name="appl-edits" data-id='conviction-record1'>
                                <label class="show-edit-btn -red" for='conviction-record1' onclick='cleanField(this)'>
                                    <svg class="delete-mark">
                                        <use xlink:href="#delete"></use> 
                                    </svg>
                                </label>    <!-- show-edit-btn -red -->
                                <input class='input-box' onchange="checkAllChanged(this)" type="text" name="conviction-record1" id="conviction-record1">
                            </div>  <!-- data-id hidden area -->
                        </div>    <!-- right side of row -->
                    </section>  <!-- conviction-record1 -->

                    <section class="row-item-75">
                        <div class="fields-set">
                            <div class="field-title">2. Date. State. Violation. Penalty.</div>
                            <div class="field-value -orange"><%= user.application['conviction-record2'] %></div>
                        </div>
                        <div class="fields-set">
                            <label class="show-edit-btn" for='conviction-record2' onclick='toggleEditField(this)'>edit</label>
                            <div class="fields-set -hidden" name="appl-edits" data-id='conviction-record2'>
                                <label class="show-edit-btn -red" for='conviction-record2' onclick='cleanField(this)'>
                                    <svg class="delete-mark">
                                        <use xlink:href="#delete"></use> 
                                    </svg>
                                </label>    <!-- show-edit-btn -red -->
                                <input class='input-box' onchange="checkAllChanged(this)" type="text" name="conviction-record2" id="conviction-record2">
                            </div>  <!-- data-id hidden area -->
                        </div>    <!-- right side of row -->
                    </section>  <!-- conviction-record2 -->

                    <section class="row-item-75">
                        <div class="fields-set">
                            <div class="field-title">3. Date. State. Violation. Penalty.</div>
                            <div class="field-value -orange"><%= user.application['conviction-record3'] %></div>
                        </div>
                        <div class="fields-set">
                            <label class="show-edit-btn" for='conviction-record3' onclick='toggleEditField(this)'>edit</label>
                            <div class="fields-set -hidden" name="appl-edits" data-id='conviction-record3'>
                                <label class="show-edit-btn -red" for='conviction-record3' onclick='cleanField(this)'>
                                    <svg class="delete-mark">
                                        <use xlink:href="#delete"></use> 
                                    </svg>
                                </label>    <!-- show-edit-btn -red -->
                                <input class='input-box' onchange="checkAllChanged(this)" type="text" name="conviction-record3" id="conviction-record3">
                            </div>  <!-- data-id hidden area -->
                        </div>    <!-- right side of row -->
                    </section>  <!-- conviction-record3 -->


                    <section class="row-item-85"><div class="gap-line"></div></section>


                    <!-- CRIMINAL CONVICTIONS -->

                    <section class="row-item-85">
                        <div class="fields-set">
                            <div class="field-title -orange">CRIMINAL CONVICTIONS:</div>
                        </div>
                    </section>

                    <section class="row-item-75">
                        <div class="fields-set">
                            <div class="field-title">1. Date, County, Felony/Misdemeanor.</div>
                            <div class="field-value -orange"><%= user.application['criminal-record1'] %></div>
                        </div>
                        <div class="fields-set">
                            <label class="show-edit-btn" for='criminal-record1' onclick='toggleEditField(this)'>edit</label>
                            <div class="fields-set -hidden" name="appl-edits" data-id='criminal-record1'>
                                <label class="show-edit-btn -red" for='criminal-record1' onclick='cleanField(this)'>
                                    <svg class="delete-mark">
                                        <use xlink:href="#delete"></use> 
                                    </svg>
                                </label>    <!-- show-edit-btn -red -->
                                <input class='input-box' onchange="checkAllChanged(this)" type="text" name="criminal-record1" id="criminal-record1">
                            </div>  <!-- data-id hidden area -->
                        </div>    <!-- right side of row -->
                    </section>  <!-- criminal-record1 -->

                    <section class="row-item-75">
                        <div class="fields-set">
                            <div class="field-title">2. Date, County, Felony/Misdemeanor.</div>
                            <div class="field-value -orange"><%= user.application['criminal-record2'] %></div>
                        </div>
                        <div class="fields-set">
                            <label class="show-edit-btn" for='criminal-record2' onclick='toggleEditField(this)'>edit</label>
                            <div class="fields-set -hidden" name="appl-edits" data-id='criminal-record2'>
                                <label class="show-edit-btn -red" for='criminal-record2' onclick='cleanField(this)'>
                                    <svg class="delete-mark">
                                        <use xlink:href="#delete"></use> 
                                    </svg>
                                </label>    <!-- show-edit-btn -red -->
                                <input class='input-box' onchange="checkAllChanged(this)" type="text" name="criminal-record2" id="criminal-record2">
                            </div>  <!-- data-id hidden area -->
                        </div>    <!-- right side of row -->
                    </section>  <!-- criminal-record2 -->

                    <section class="row-item-75">
                        <div class="fields-set">
                            <div class="field-title">3. Date, County, Felony/Misdemeanor.</div>
                            <div class="field-value -orange"><%= user.application['criminal-record3'] %></div>
                        </div>
                        <div class="fields-set">
                            <label class="show-edit-btn" for='criminal-record3' onclick='toggleEditField(this)'>edit</label>
                            <div class="fields-set -hidden" name="appl-edits" data-id='criminal-record3'>
                                <label class="show-edit-btn -red" for='criminal-record3' onclick='cleanField(this)'>
                                    <svg class="delete-mark">
                                        <use xlink:href="#delete"></use> 
                                    </svg>
                                </label>    <!-- show-edit-btn -red -->
                                <input class='input-box' onchange="checkAllChanged(this)" type="text" name="criminal-record3" id="criminal-record3">
                            </div>  <!-- data-id hidden area -->
                        </div>    <!-- right side of row -->
                    </section>  <!-- criminal-record3 -->

                    
                    <section class="row-item-85"><div class="gap-line"></div></section>
                    

                    <!-- Employers info -->

                    <section class="row-item-85">
                        <div class="fields-set">
                            <div class="field-title -orange">10 YEAR EMPLOYMENT HISTORY</div>
                        </div>
                    </section>

                    <section class="row-item-85">
                        <div class="fields-set">
                            <div class="field-title">Can contact/Verify:</div>
                            <div class="field-value -orange"><%= user.application['employer-contact'] %></div>
                        </div>
                    </section>

                    <% if(user.application.employers.length) { %>
                        <% user.application.employers.map((employer, index) => { %>

                            <section class="row-item-85">
                                <div class="fields-set">
                                    <div class="field-title">#<%= index + 1 %>.Company</div>
                                    <div class="field-value -italic"><%= employer['employer-company'] %></div>
                                </div>
                                <div class="fields-set">
                                    <label class="show-edit-btn" for='employer<%= index %>-company' onclick='toggleEditField(this)'>edit</label>
                                    <div class="fields-set -hidden" name="appl-edits" data-id='employer<%= index %>-company'>
                                        <label class="show-edit-btn -red" for='employer<%= index %>-company' onclick='cleanField(this)'>
                                            <svg class="delete-mark">
                                                <use xlink:href="#delete"></use> 
                                            </svg>
                                        </label>    <!-- show-edit-btn -red -->
                                        <input class='input-box' onchange="checkAllChanged(this)" type="text" name="employer<%= index %>-company" id="employer<%= index %>-company">
                                    </div>  <!-- data-id hidden area -->
                                </div>    <!-- right side of row -->
                            </section>  <!-- employer-company -->
    
                            <section class="row-item-75">
                                <div class="fields-set">
                                    <div class="field-title">Address,City,State,Zip</div>
                                    <div class="field-value"><%= employer['employer-address'] %></div>
                                </div>
                                <div class="fields-set">
                                    <label class="show-edit-btn" for='employer<%= index %>-address' onclick='toggleEditField(this)'>edit</label>
                                    <div class="fields-set -hidden" name="appl-edits" data-id='employer<%= index %>-address'>
                                        <label class="show-edit-btn -red" for='employer<%= index %>-address' onclick='cleanField(this)'>
                                            <svg class="delete-mark">
                                                <use xlink:href="#delete"></use> 
                                            </svg>
                                        </label>    <!-- show-edit-btn -red -->
                                        <input class='input-box' onchange="checkAllChanged(this)" type="text" name="employer<%= index %>-address" id="employer<%= index %>-address">
                                    </div>  <!-- data-id hidden area -->
                                </div>    <!-- right side of row -->
                            </section>  <!-- employer-address -->
    
                            <section class="row-item-75">
                                <div class="fields-set">
                                    <div class="field-title">Supervisor, Phone</div>
                                    <div class="field-value"><%= employer['employer-supervisor'] %></div>
                                </div>
                                <div class="fields-set">
                                    <label class="show-edit-btn" for='employer<%= index %>-supervisor' onclick='toggleEditField(this)'>edit</label>
                                    <div class="fields-set -hidden" name="appl-edits" data-id='employer<%= index %>-supervisor'>
                                        <label class="show-edit-btn -red" for='employer<%= index %>-supervisor' onclick='cleanField(this)'>
                                            <svg class="delete-mark">
                                                <use xlink:href="#delete"></use> 
                                            </svg>
                                        </label>    <!-- show-edit-btn -red -->
                                        <input class='input-box' onchange="checkAllChanged(this)" type="text" name="employer<%= index %>-supervisor" id="employer<%= index %>-supervisor">
                                    </div>  <!-- data-id hidden area -->
                                </div>    <!-- right side of row -->
                            </section>  <!-- employer-supervisor -->
    
                            <section class="row-item-75">
                                <div class="fields-set">
                                    <div class="field-title">Position Held, From To</div>
                                    <div class="field-value"><%= employer['employer-position'] %></div>
                                </div>
                                <div class="fields-set">
                                    <label class="show-edit-btn" for='employer<%= index %>-position' onclick='toggleEditField(this)'>edit</label>
                                    <div class="fields-set -hidden" name="appl-edits" data-id='employer<%= index %>-position'>
                                        <label class="show-edit-btn -red" for='employer<%= index %>-position' onclick='cleanField(this)'>
                                            <svg class="delete-mark">
                                                <use xlink:href="#delete"></use> 
                                            </svg>
                                        </label>    <!-- show-edit-btn -red -->
                                        <input class='input-box' onchange="checkAllChanged(this)" type="text" name="employer<%= index %>-position" id="employer<%= index %>-position">
                                    </div>  <!-- data-id hidden area -->
                                </div>    <!-- right side of row -->
                            </section>  <!-- employer-position -->

                        <% }) %>
                    <% } else { %>  <!-- noone entered, printing 1 blank for additing -->
                        <section class="row-item-85">
                            <div class="fields-set">
                                <div class="field-title">Company</div>
                                <div class="field-value">no info, you can add...</div>
                            </div>
                            <div class="fields-set">
                                <label class="show-edit-btn" for='employer1-company' onclick='toggleEditField(this)'>edit</label>
                                <div class="fields-set -hidden" name="appl-edits" data-id='employer1-company'>
                                    <label class="show-edit-btn -red" for='employer1-company' onclick='cleanField(this)'>
                                        <svg class="delete-mark">
                                            <use xlink:href="#delete"></use> 
                                        </svg>
                                    </label>    <!-- show-edit-btn -red -->
                                    <input class='input-box' onchange="checkAllChanged(this)" type="text" name="employer1-company" id="employer1-company">
                                </div>  <!-- data-id hidden area -->
                            </div>    <!-- right side of row -->
                        </section>  <!-- employer1-company -->

                        <section class="row-item-85">
                            <div class="fields-set">
                                <div class="field-title">Address,City,State,Zip</div>
                                <div class="field-value">no info, you can add...</div>
                            </div>
                            <div class="fields-set">
                                <label class="show-edit-btn" for='employer1-address' onclick='toggleEditField(this)'>edit</label>
                                <div class="fields-set -hidden" name="appl-edits" data-id='employer1-address'>
                                    <label class="show-edit-btn -red" for='employer1-address' onclick='cleanField(this)'>
                                        <svg class="delete-mark">
                                            <use xlink:href="#delete"></use> 
                                        </svg>
                                    </label>    <!-- show-edit-btn -red -->
                                    <input class='input-box' onchange="checkAllChanged(this)" type="text" name="employer1-address" id="employer1-address">
                                </div>  <!-- data-id hidden area -->
                            </div>    <!-- right side of row -->
                        </section>  <!-- employer1-address -->

                        <section class="row-item-85">
                            <div class="fields-set">
                                <div class="field-title">Supervisor, Phone</div>
                                <div class="field-value">no info, you can add...</div>
                            </div>
                            <div class="fields-set">
                                <label class="show-edit-btn" for='employer1-supervisor' onclick='toggleEditField(this)'>edit</label>
                                <div class="fields-set -hidden" name="appl-edits" data-id='employer1-supervisor'>
                                    <label class="show-edit-btn -red" for='employer1-supervisor' onclick='cleanField(this)'>
                                        <svg class="delete-mark">
                                            <use xlink:href="#delete"></use> 
                                        </svg>
                                    </label>    <!-- show-edit-btn -red -->
                                    <input class='input-box' onchange="checkAllChanged(this)" type="text" name="employer1-supervisor" id="employer1-supervisor">
                                </div>  <!-- data-id hidden area -->
                            </div>    <!-- right side of row -->
                        </section>  <!-- employer1-supervisor -->

                        <section class="row-item-85">
                            <div class="fields-set">
                                <div class="field-title">Position Held, From To</div>
                                <div class="field-value">no info, you can add...</div>
                            </div>
                            <div class="fields-set">
                                <label class="show-edit-btn" for='employer1-position' onclick='toggleEditField(this)'>edit</label>
                                <div class="fields-set -hidden" name="appl-edits" data-id='employer1-position'>
                                    <label class="show-edit-btn -red" for='employer1-position' onclick='cleanField(this)'>
                                        <svg class="delete-mark">
                                            <use xlink:href="#delete"></use> 
                                        </svg>
                                    </label>    <!-- show-edit-btn -red -->
                                    <input class='input-box' onchange="checkAllChanged(this)" type="text" name="employer1-position" id="employer1-position">
                                </div>  <!-- data-id hidden area -->
                            </div>    <!-- right side of row -->
                        </section>  <!-- employer1-position -->
                    <% } %>

                    <!-- contains all updated MODELS fields -->
                    <input type="hidden" name='whatWasUpdated'  data-updated='appl-edits' />

                    <!-- @SIGNATURE -->
                    <section class="row-item-85 -right-side">
                        <div class="field-title -windblow">completed as of</div>
                        <div class="field-value"><%= new Date(user.application.created).toLocaleDateString('en-US', { timeZone: 'America/Los_Angeles' }) %> (<%= new Date(user.application.created).toLocaleTimeString('en-US', { timeZone: 'America/Los_Angeles' }) %>)</div>
                    </section>
                    
                    <!-- @ADMIN CHANGED -->
                    <% if(user.application.updatedAdmin) { %>
                        <% let updater = user.application.updatedAdmin+' ' %>
                        <% updater += new Date(user.application.updatedDate).toLocaleDateString('en-US', { timeZone: 'America/Los_Angeles' })+' ' %>
                        <% updater += '('+new Date(user.application.updatedDate).toLocaleTimeString('en-US', { timeZone: 'America/Los_Angeles' })+')' %>

                        <section class="row-item-85 -right-side">
                            <div class="field-title -windblow -orange">updated by</div>
                            <div class="field-value"><%= updater %></div>
                        </section>
                    <% } %>

                    <!-- @BUTTONS -->
                    <section class="row-item-85 -button-box">
                        <span class='-btn' onclick="print('<%= pdfObj %>')">Download</span>
                        <a class='-btn' href='/admin/print-form/<%= user._id %>?form=form2'>Print</a>
                        <button type='submit' class='-btn'>Update</button>
                    </section>

                </form>   <!-- block2 -->

            <% } else { %>
                <section class="row-item-85">
                    <div class="field-title -small">Application Form was not filled out yet</div>
                </section>

                <% if(user.dataCollection) { %>
                    <section class="row-item-85">
                        <div class="field-warning">Data Collection has been completed, so Application form is a next user's step.  Application is one of the biggest forms, it takes time to fill it out accurately, so be patient)) Actually,<span class="field-warning -bold"> as an ADMIN you can advice user how to make it right.</span> This approach will save your further work time when fixing mistakes will be needed.</div>
                    </section>
                <% } else { %>
                    <section class="row-item-85">
                        <div class="field-warning">Data Collection hasn't been completed by user yet. They should stick with Data Collection first of all, since that form is a basic one.</div>
                    </section>
                <% } %>

            <% } %>

        </section>  <!-- block-box -->

        



        
        <!-- @AGREEMENT  id=block3 -->
        <!-- EDIT group 'agr-edits' -->

        <section class="block-box -hidden" name='blockBox' id='block3'>
            <h2 class="block-header">Agreement Form</h2>
            <div class="block-box-inner">       <!-- structire is different from above block 1 & 2 because block 3 contains 2 forms and forms CANNOT be an element of another form -->
                <% if(user.agreement) { %>

                    <!-- #1 UPDATE FORM -->
                    <form action='/admin/update-form3/<%= user.agreement._id %>' method="post" id='form3'>

                        <input type="hidden" name='postedPath' value='/admin/user/<%= user._id %>' />       <!-- path for getting back after updating -->

                        <section class="row-item-85">
                            <div class="fields-set">
                                <div class="field-title">Tuition Program</div>
                                <div class="field-value"><%= user.agreement.program %></div>
                            </div>
                            <div class="fields-set">
                                <label class="show-edit-btn" for='program' onclick='toggleEditField(this)'>edit</label>
                                <div class="fields-set -hidden" name="agr-edits" data-id='program'>
                                    <label class="show-edit-btn -red" for='program' onclick='cleanField(this)'>
                                        <svg class="delete-mark">
                                            <use xlink:href="#delete"></use> 
                                        </svg>
                                    </label>    <!-- show-edit-btn -red -->
                                    <select class='input-box' onchange="checkAllChanged(this)" name="program" id="program">
                                        <option value='DNU'>do not update</option>
                                        <option value='4 weeks * 40 hours/week = 160 total hours'>4 weeks * 40 hours/week = 160 total hours</option>
                                        <option value='2 weeks * 40 hours/week = 80 total hours'>2 weeks * 40 hours/week = 80 total hours</option>
                                    </select>
                                </div>  <!-- data-id hidden area -->
                            </div>
                        </section>  <!-- program -->

                        <section class="row-item-85">
                            <div class="fields-set">
                                <div class="field-title">Class</div>
                                <div class="field-value -orange"><%= user.agreement.class %></div>
                            </div>
                            <div class="fields-set">
                                <label class="show-edit-btn" for='class' onclick='toggleEditField(this)'>edit</label>
                                <div class="fields-set -hidden" name="agr-edits" data-id='class'>
                                    <label class="show-edit-btn -red" for='class' onclick='cleanField(this)'>
                                        <svg class="delete-mark">
                                            <use xlink:href="#delete"></use> 
                                        </svg>
                                    </label>    <!-- show-edit-btn -red -->
                                    <select class='input-box' onchange="checkAllChanged(this)" name="class" id="class">
                                        <option value='DNU'>do not update</option>
                                        <option value='CDL Class A'>CDL Class A</option>
                                        <option value='CDL Class B'>CDL Class B</option>
                                        <option value='Upgrade to Class A'>Upgrade to Class A</option>
                                        <option value='Endorsements'>Endorsements</option>
                                    </select>
                                </div>  <!-- data-id hidden area -->
                            </div>
                        </section>  <!-- class -->

                        <section class="row-item-85">
                            <div class="fields-set">
                                <div class="field-title">Transmission Type</div>
                                <div class="field-value -orange"><%= user.agreement.transmission %></div>
                            </div>
                            <div class="fields-set">
                                <label class="show-edit-btn" for='transmission' onclick='toggleEditField(this)'>edit</label>
                                <div class="fields-set -hidden" name="agr-edits" data-id='transmission'>
                                    <label class="show-edit-btn -red" for='transmission' onclick='cleanField(this)'>
                                        <svg class="delete-mark">
                                            <use xlink:href="#delete"></use> 
                                        </svg>
                                    </label>    <!-- show-edit-btn -red -->
                                    <select class='input-box' onchange="checkAllChanged(this)" name="transmission" id="transmission">
                                        <option value='DNU'>do not update</option>
                                        <option value='Automatic Transmission'>Automatic Transmission</option>
                                        <option value='Manual Transmission'>Manual Transmission</option>
                                    </select>
                                </div>  <!-- data-id hidden area -->
                            </div>
                        </section>  <!-- transmission -->

                        <section class="row-item-85">
                            <div class="fields-set">
                                <div class="field-title">Visiting Type</div>
                                <div class="field-value"><%= user.agreement.visiting %></div>
                            </div>
                            <div class="fields-set">
                                <label class="show-edit-btn" for='visiting' onclick='toggleEditField(this)'>edit</label>
                                <div class="fields-set -hidden" name="agr-edits" data-id='visiting'>
                                    <label class="show-edit-btn -red" for='visiting' onclick='cleanField(this)'>
                                        <svg class="delete-mark">
                                            <use xlink:href="#delete"></use> 
                                        </svg>
                                    </label>    <!-- show-edit-btn -red -->
                                    <select class='input-box' onchange="checkAllChanged(this)" name="visiting" id="visiting">
                                        <option value='DNU'>do not update</option>
                                        <option value='Full Time (at least 6h per day)'>Full Time (at least 6h per day)</option>
                                        <option value='Part Time (at least 4h per day)'>Part Time (at least 4h per day)</option>
                                    </select>
                                </div>  <!-- data-id hidden area -->
                            </div>
                        </section>  <!-- visiting -->

                        <section class="row-item-85">
                            <div class="fields-set">
                                <div class="field-title">Payments Section</div>
                                <div class="field-value"><%= user.agreement.payment %></div>
                            </div>
                            <div class="fields-set">
                                <label class="show-edit-btn" for='payment' onclick='toggleEditField(this)'>edit</label>
                                <div class="fields-set -hidden" name="agr-edits" data-id='payment'>
                                    <label class="show-edit-btn -red" for='payment' onclick='cleanField(this)'>
                                        <svg class="delete-mark">
                                            <use xlink:href="#delete"></use> 
                                        </svg>
                                    </label>    <!-- DELETE show-edit-btn -red -->
                                    <label class="show-edit-btn -red" onclick='redoField(payment, "<%= user.agreement.payment %>")'>
                                        <svg class="redo-mark">
                                            <use xlink:href="#redo"></use> 
                                        </svg>
                                    </label>    <!-- REDO show-edit-btn -red -->
                                    <div class='column-view' id='payment' data-value='<%= user.agreement.payment %>'>
                                        <% const pmts = user.agreement.payment.split(',') %>

                                        <% const headers = ['Cash Payment', 'Credit Card', 'Scholarship', 'Financial Aid', 'Third Party (e.g.VA;<br>Voc.Rehab.; LnI; Employer)'] %>
                                        <% const items = ['Cash', 'Credit Card', 'Scholarship', 'Financial Aid', 'Third Party'] %>

                                        <% items.map((item, index) => { %>
                                            <% const checked =  pmts.includes(item) ? 'checked' : '' %>
                                            <label for="payment-Choice<%= index %>">
                                                <input type="checkbox" id="payment-Choice<%= index %>" name="payment" value="<%= item %>" <%= checked %> >
                                                <span><%- headers[index] %></span>
                                            </label>
                                        <% }) %>

                                    </div>  <!-- payment options -->
                                </div>  <!-- data-id hidden area -->
                            </div>
                        </section>  <!-- payment -->

                        <section class="row-item-85">
                            <div class="fields-set">
                                <div class="field-title">List third party payer:</div>
                                <div class="field-value"><%= user.agreement.thirdPartyList %></div>
                            </div>
                            <div class="fields-set">
                                <label class="show-edit-btn" for='thirdPartyList' onclick='toggleEditField(this)'>edit</label>
                                <div class="fields-set -hidden" name="agr-edits" data-id='thirdPartyList'>
                                    <label class="show-edit-btn -red" for='thirdPartyList' onclick='cleanField(this)'>
                                        <svg class="delete-mark">
                                            <use xlink:href="#delete"></use> 
                                        </svg>
                                    </label>    <!-- show-edit-btn -red -->
                                    <input class='input-box' onchange="checkAllChanged(this)" type="text" name="thirdPartyList" id="thirdPartyList" />
                                </div>  <!-- data-id hidden area -->
                            </div>
                        </section>  <!-- thirdPartyList -->

                        <section class="row-item-85">
                            <div class="fields-set">
                                <div class="field-title">Down Payment:</div>
                                <div class="field-value"><%= new Intl.NumberFormat('us-US', { style: 'currency', currency: 'USD' }).format(user.agreement.downPayment) %></div>
                            </div>
                            <div class="fields-set">
                                <label class="show-edit-btn" for='downPayment' onclick='toggleEditField(this)'>edit</label>
                                <div class="fields-set -hidden" name="agr-edits" data-id='downPayment'>
                                    <label class="show-edit-btn -red" for='downPayment' onclick='cleanField(this)'>
                                        <svg class="delete-mark">
                                            <use xlink:href="#delete"></use> 
                                        </svg>
                                    </label>    <!-- show-edit-btn -red -->
                                    <input class='input-box' onchange="checkAllChanged(this)" type="number" min=0 step=.01 name="downPayment" id="downPayment" />
                                </div>  <!-- data-id hidden area -->
                            </div>
                        </section>  <!-- downPayment -->

                        <section class="row-item-85">
                            <div class="fields-set">
                                <div class="field-title">Monthly Payment:</div>
                                <div class="field-value"><%= new Intl.NumberFormat('us-US', { style: 'currency', currency: 'USD' }).format(user.agreement.monthlyPayment) %></div>
                            </div>
                            <div class="fields-set">
                                <label class="show-edit-btn" for='monthlyPayment' onclick='toggleEditField(this)'>edit</label>
                                <div class="fields-set -hidden" name="agr-edits" data-id='monthlyPayment'>
                                    <label class="show-edit-btn -red" for='monthlyPayment' onclick='cleanField(this)'>
                                        <svg class="delete-mark">
                                            <use xlink:href="#delete"></use> 
                                        </svg>
                                    </label>    <!-- show-edit-btn -red -->
                                    <input class='input-box' onchange="checkAllChanged(this)" type="number" min=0 step=.01 name="monthlyPayment" id="monthlyPayment" />
                                </div>  <!-- data-id hidden area -->
                            </div>
                        </section>  <!-- monthlyPayment -->

                        <section class="row-item-85">
                            <div class="fields-set">
                                <div class="field-title">Loan Payment:</div>
                                <div class="field-value"><%= new Intl.NumberFormat('us-US', { style: 'currency', currency: 'USD' }).format(user.agreement.loanPayment) %></div>
                            </div>
                            <div class="fields-set">
                                <label class="show-edit-btn" for='loanPayment' onclick='toggleEditField(this)'>edit</label>
                                <div class="fields-set -hidden" name="agr-edits" data-id='loanPayment'>
                                    <label class="show-edit-btn -red" for='loanPayment' onclick='cleanField(this)'>
                                        <svg class="delete-mark">
                                            <use xlink:href="#delete"></use> 
                                        </svg>
                                    </label>    <!-- show-edit-btn -red -->
                                    <input class='input-box' onchange="checkAllChanged(this)" type="number" min=0 step=.01 name="loanPayment" id="loanPayment" />
                                </div>  <!-- data-id hidden area -->
                            </div>
                        </section>  <!-- loanPayment -->
    
                        <section class="row-item-85"><div class="gap-line"></div></section>

                        <section class="row-item-85">
                            <div class="fields-set">
                                <div class="field-title">Parent Or Guardian First Name</div>
                                <div class="field-value"><%= user.agreement.parentFirstName %></div>
                            </div>
                            <div class="fields-set">
                                <label class="show-edit-btn" for='parentFirstName' onclick='toggleEditField(this)'>edit</label>
                                <div class="fields-set -hidden" name="agr-edits" data-id='parentFirstName'>
                                    <label class="show-edit-btn -red" for='parentFirstName' onclick='cleanField(this)'>
                                        <svg class="delete-mark">
                                            <use xlink:href="#delete"></use> 
                                        </svg>
                                    </label>    <!-- show-edit-btn -red -->
                                    <input class='input-box' onchange="checkAllChanged(this)" type="text" name="parentFirstName" id="parentFirstName" />
                                </div>  <!-- data-id hidden area -->
                            </div>
                        </section>  <!-- parentFirstName -->

                        <section class="row-item-85">
                            <div class="fields-set">
                                <div class="field-title">Parent Or Guardian Last Name</div>
                                <div class="field-value"><%= user.agreement.parentLastName %></div>
                            </div>
                            <div class="fields-set">
                                <label class="show-edit-btn" for='parentLastName' onclick='toggleEditField(this)'>edit</label>
                                <div class="fields-set -hidden" name="agr-edits" data-id='parentLastName'>
                                    <label class="show-edit-btn -red" for='parentLastName' onclick='cleanField(this)'>
                                        <svg class="delete-mark">
                                            <use xlink:href="#delete"></use> 
                                        </svg>
                                    </label>    <!-- show-edit-btn -red -->
                                    <input class='input-box' onchange="checkAllChanged(this)" type="text" name="parentLastName" id="parentLastName" />
                                </div>  <!-- data-id hidden area -->
                            </div>
                        </section>  <!-- parentLastName -->


                        <% if(user.agreement.schoolSignRep) { %>        <!-- Agreement signed, show fields for editing -->

                            <section class="row-item-85"><div class="gap-line"></div></section>

                            <section class="row-item-85">
                                <div class="field-title -orange">Agreement is Signed on TTA's behalf by:</div>
                                <!-- uses signer.name instead of user.agreement.schoolSignRep(just an ID) because it defined already from server side -->
                                <div class="field-value -orange"><%= signer.name %> <%= new Date(user.agreement.schoolSignDate).toLocaleDateString('en-US', { timeZone: 'America/Los_Angeles' }) %></div>
                            </section>
    
                            <section class="row-item-85">
                                <div class="fields-set">
                                    <div class="field-value -small">Admins can change financials terms of Agreement</div>
                                </div>
                            </section>
    
                            <section class="row-item-85">
                                <div class="fields-set">
                                    <div class="field-title">Cost of Tuition</div>
                                    <div class="field-value"><%= new Intl.NumberFormat('us-US', { style: 'currency', currency: 'USD' }).format(user.agreement.tuitionCost) %></div>
                                </div>
                                <div class="fields-set">
                                    <label class="show-edit-btn" for='tuitionCost' onclick='toggleEditField(this)'>edit</label>
                                    <div class="fields-set -hidden" name="agr-edits" data-id='tuitionCost'>
                                        <label class="show-edit-btn -red" for='tuitionCost' onclick='cleanField(this)'>
                                            <svg class="delete-mark">
                                                <use xlink:href="#delete"></use> 
                                            </svg>
                                        </label>    <!-- show-edit-btn -red -->
                                        <input class='input-box' onchange="checkAllChanged(this)" type="number" name="tuitionCost" id="tuitionCost" min=0 step='.01' />
                                    </div>  <!-- data-id hidden area -->
                                </div>
                            </section>  <!-- tuitionCost -->
    
                            <section class="row-item-85">
                                <div class="fields-set">
                                    <div class="field-title">Registration Fee</div>
                                    <div class="field-value"><%= new Intl.NumberFormat('us-US', { style: 'currency', currency: 'USD' }).format(user.agreement.regisrFee) %></div>
                                </div>
                                <div class="fields-set">
                                    <label class="show-edit-btn" for='regisrFee' onclick='toggleEditField(this)'>edit</label>
                                    <div class="fields-set -hidden" name="agr-edits" data-id='regisrFee'>
                                        <label class="show-edit-btn -red" for='regisrFee' onclick='cleanField(this)'>
                                            <svg class="delete-mark">
                                                <use xlink:href="#delete"></use> 
                                            </svg>
                                        </label>    <!-- show-edit-btn -red -->
                                        <input class='input-box' onchange="checkAllChanged(this)" type="number" name="regisrFee" id="regisrFee" min=0 step='.01' />
                                    </div>  <!-- data-id hidden area -->
                                </div>
                            </section>  <!-- regisrFee -->
    
                            <section class="row-item-85">
                                <div class="fields-set">
                                    <div class="field-title">Supplies and Materials Fee</div>
                                    <div class="field-value"><%= new Intl.NumberFormat('us-US', { style: 'currency', currency: 'USD' }).format(user.agreement.supplyFee) %></div>
                                </div>
                                <div class="fields-set">
                                    <label class="show-edit-btn" for='supplyFee' onclick='toggleEditField(this)'>edit</label>
                                    <div class="fields-set -hidden" name="agr-edits" data-id='supplyFee'>
                                        <label class="show-edit-btn -red" for='supplyFee' onclick='cleanField(this)'>
                                            <svg class="delete-mark">
                                                <use xlink:href="#delete"></use> 
                                            </svg>
                                        </label>    <!-- show-edit-btn -red -->
                                        <input class='input-box' onchange="checkAllChanged(this)" type="number" name="supplyFee" id="supplyFee" min=0 step='.01' />
                                    </div>  <!-- data-id hidden area -->
                                </div>
                            </section>  <!-- supplyFee -->
    
                            <section class="row-item-85">
                                <div class="fields-set">
                                    <div class="field-title">Other Fees</div>
                                    <div class="field-value"><%= new Intl.NumberFormat('us-US', { style: 'currency', currency: 'USD' }).format(user.agreement.otherFee) %></div>
                                </div>
                                <div class="fields-set">
                                    <label class="show-edit-btn" for='otherFee' onclick='toggleEditField(this)'>edit</label>
                                    <div class="fields-set -hidden" name="agr-edits" data-id='otherFee'>
                                        <label class="show-edit-btn -red" for='otherFee' onclick='cleanField(this)'>
                                            <svg class="delete-mark">
                                                <use xlink:href="#delete"></use> 
                                            </svg>
                                        </label>    <!-- show-edit-btn -red -->
                                        <input class='input-box' onchange="checkAllChanged(this)" type="number" name="otherFee" id="otherFee" min=0 step='.01' />
                                    </div>  <!-- data-id hidden area -->
                                </div>
                            </section>  <!-- otherFee -->
    
                        <% } %>     <!-- Agreement signed -->


                        <!-- contains all updated MODELS fields -->
                        <input type="hidden" name='whatWasUpdated'  data-updated='agr-edits' />

                        <!-- @SIGNATURE -->
                        <section class="row-item-85 -right-side">
                            <div class="field-title -windblow">completed as of</div>
                            <div class="field-value"><%= new Date(user.agreement.created).toLocaleDateString() %> (<%= new Date(user.agreement.created).toLocaleTimeString('en-US', { timeZone: 'America/Los_Angeles' }) %>)</div>
                        </section>

                        <!-- @UPDATED by whom and when -->
                        <% if(user.agreement.updatedAdmin) { %>
                            <% let updater = user.agreement.updatedAdmin+' ' %>
                            <% updater += new Date(user.agreement.updatedDate).toLocaleDateString('en-US', { timeZone: 'America/Los_Angeles' }) %>
                            <% updater += '('+new Date(user.agreement.updatedDate).toLocaleTimeString('en-US', { timeZone: 'America/Los_Angeles' })+')' %>

                            <section class="row-item-85 -right-side">
                                <div class="field-title -windblow -orange">updated by</div>
                                <div class="field-value"><%= updater %></div>
                            </section>
                        <% } %>
    
                        <!-- @BUTTONS -->
                        <section class="row-item-85 -button-box">
                            <span class='-btn' onclick="print('<%= pdfObj %>')">Download</span>
                            <a class='-btn' href='/admin/print-form/<%= user._id %>?form=form3'>Print</a>
                            <button type='submit' class='-btn'>Update</button>
                        </section>

                    </form>     <!-- /admin/update-form3 -->
                    

                    <section class="row-item-95"><div class="gap-line"></div></section>


                    <!-- #2 SCHOOL SIGNATURE FORM -->
                    <% if(!user.agreement.schoolSignRep) { %>

                        <form action='/admin/sign/<%= user.agreement._id %>' method="post">

                            <input type="hidden" name='postedPath' value='/admin/user/<%= user._id %>' />       <!-- path for getting back after updating -->

                            <section class="row-item-85">
                                <div class="fields-set">
                                    <div class="field-title -orange -italic">NOT signed on TTA's behalf yet</div>
                                </div>
                            </section>
                            <section class="row-item-85">
                                <div class="fields-set">
                                    <div class="field-value -small">Agreement cannot be signed zero cost. Please indicate its cost and additional fees.</div>
                                </div>
                            </section>

                            <section class="row-item-85">
                                <div class="field-title">Cost of Tuition</div>
                                <div class="field-value">
                                    <span name='tuitionCost'>e.g. <%= new Intl.NumberFormat('us-US', { style: 'currency', currency: 'USD' }).format(0) %></span>
                                    <input type="number" class='input-box' name='tuitionCostItem' id='tuitionCost' min=1 value=0.00 step='.01' oninput='updateSpan(this)' required>
                                </div>
                            </section>

                            <section class="row-item-85">
                                <div class="field-title">Registration Fee</div>
                                <div class="field-value">
                                    <span name='regisrFee'>e.g. <%= new Intl.NumberFormat('us-US', { style: 'currency', currency: 'USD' }).format(0) %></span>
                                    <input type="number" class='input-box' name='regisrFeeItem' id='regisrFee' min=0 value=0.00 step='.01'  oninput='updateSpan(this)' required>
                                </div>
                            </section>

                            <section class="row-item-85">
                                <div class="field-title">Supplies and Materials Fee</div>
                                <div class="field-value">
                                    <span name='supplyFee'>e.g. <%= new Intl.NumberFormat('us-US', { style: 'currency', currency: 'USD' }).format(0) %></span>
                                    <input type="number" class='input-box' name='supplyFeeItem' id='supplyFee' min=0 value=0.00 step='.01' oninput='updateSpan(this)' required>
                                </div>
                            </section>

                            <section class="row-item-85">
                                <div class="field-title">Other Fees</div>
                                <div class="field-value">
                                    <span name='otherFee'>e.g. <%= new Intl.NumberFormat('us-US', { style: 'currency', currency: 'USD' }).format(0) %></span>
                                    <input type="number" class='input-box' name='otherFeeItem' id='otherFee' min=0 value=0.00 step='.01'  oninput='updateSpan(this)' required>
                                </div>
                            </section>

                            <section class="row-item-85 -right-side">
                                <div class="field-title -orange">Agreement's Total:</div>
                                <div class="field-value">
                                    <span name='agrTotal'><%= new Intl.NumberFormat('us-US', { style: 'currency', currency: 'USD' }).format(0) %></span>
                                </div>
                            </section>

                            <section class="row-item-85">
                                <div class="field-title -small">To sign an Agreement please put in cost and all required fees, also enter your admin's password</div>
                            </section>
                            <section class="row-item-85">
                                <!-- signer.first, signer.last, signer.title can be used here -->
                                <div class="fields-set">
                                    <div class="field-title">*agreement will be signed</div>
                                    <div class="field-value -orange">as of today by <%= signer.name %></div>
                                </div>
                            </section>

                            <section class="row-item-85 -button-box">
                                <div class="fields-set">
                                    <div class="field-value">
                                        <input type='password' class='input-box' name='signerPassword' id='signerPassword' placeholder="Admin's Password" required/>*
                                    </div>
                                    <label for="toggler">
                                        <input type="checkbox" id="toggler" onchange="toggleVisibility(this, signerPassword)">
                                        <span class='show-password'>Show</span>
                                    </label>
                                    <button class='-btn' type="submit">Sign</button>
                                </div>
                            </section>

                        </form>     <!-- sign Agreement form -->

                    <% } %>     <!-- if not signed -->

                <% } else { %>
                    <section class="row-item-85">
                        <div class="field-value -small">Agreement was not signed on user's behalf yet.</div>
                    </section>
                    <% if(user.dataCollection) { %>
                        <section class="row-item-85">
                            <div class="field-value -small">#1 Data Collection has been completed by User <%= new Date(user.dataCollection.created).toLocaleDateString('en-US', { timeZone: 'America/Los_Angeles' }) %></div>
                        </section>
                    <% } else { %>
                        <section class="row-item-85">
                            <div class="field-warning">#1 Data Collection hasn't been completed by User.</div>
                        </section>
                    <% } %>
                    
                    <% if(user.application) { %>
                        <section class="row-item-85">
                            <div class="field-value -small">#2 Application has been completed by User <%= new Date(user.application.created).toLocaleDateString('en-US', { timeZone: 'America/Los_Angeles' }) %></div>
                        </section>
                    <% } else { %>
                        <section class="row-item-85">
                            <div class="field-warning">#2 Application form is not ready yet.</div>
                        </section>
                    <% } %>

                <% } %> 

            </div>  <!-- block-box-inner -->
        </section>  <!-- block-box -->



        <section class="block-box -hidden" name='blockBox' id='block4'>
            <h2 class="block-header">Student Info Block</h2>
            <div class='block-box-inner'>
                <%- include('user-student-info.ejs') %>
            </div>   <!-- block4 -->
        </section>  <!-- block-box -->

    </div>  <!-- main-box -->

    
    
    


    


    


    
    <script defer>

        // preparing PDF object for downloading
        function print(obj) {
            pdfMake.createPdf(JSON.parse(obj.toString())).download('name.pdf');
        }

        // password show/hide
        function toggleVisibility(toggler, password) {
            password.type = toggler.checked ? 'text' : 'password'
        }

        
        // @CURRENCY ENTERING routines
        // INPUTS - cost items
        const costItems = [
            document.querySelector('#tuitionCost'),
            document.querySelector('#regisrFee'),
            document.querySelector('#supplyFee'),
            document.querySelector('#otherFee')
        ]   

        function updateSpan(currencyInput) {
            // shows amount into span near
            const span = document.querySelector(`[name=${currencyInput.id}]`) // span has NAME equals input's ID
            const text = currencyInput.value
            const num = Number.isNaN(parseFloat(text)) ? 0 : parseFloat(text)
            
            span.textContent = new Intl.NumberFormat('us-US', { style: 'currency', currency: 'USD' }).format(num)
            
            // adding/removing PARROT class to SPAN
            if (num) {
                span.classList.add('parrot')
            } else {
                span.classList.remove('parrot')
            }

            // calc. total
            const spanTotal = document.querySelector('[name=agrTotal]') // span has NAME equals input's ID

            let sum = 0
            costItems.map(item => {
                sum += Number.isNaN(parseFloat(item.value)) ? 0 : parseFloat(item.value)
            })

            spanTotal.textContent = new Intl.NumberFormat('us-US', { style: 'currency', currency: 'USD' }).format(sum)
            // adding/removing PARROT class to TOTAL
            if (sum) {
                spanTotal.classList.add('parrot')
            } else {
                spanTotal.classList.remove('parrot')
            }

        }


        // SHOW edit field
        function toggleEditField(label) {
            
            const divHidden = document.querySelector(`[data-id='${label.htmlFor}']`)
            const input = document.getElementById(label.htmlFor)
            
            if (divHidden && input) {
                if(divHidden.classList.contains('-hidden')) {
                    divHidden.classList.remove('-hidden')
                } else {
                    divHidden.classList.add('-hidden')
                }

                if (input.value === '' || input.value === 'DNU' || input.tagName === 'DIV') {
                    // cange calm and hover styles
                    const labelStyle = getComputedStyle(label)
                    const colorCalm = labelStyle.getPropertyValue('--color-calm')
                    const colorHover = labelStyle.getPropertyValue('--color-hover')

                    label.style.setProperty('--color-calm', colorHover)
                    label.style.setProperty('--color-hover', colorCalm)
                }
            }
        }


        // compares two 1v arrays
        const equals = (a, b) =>
        a.length === b.length &&
        a.every((v, i) => v === b[i])


        // checks if any of inputs were updated
        async function checkAllGroupHiddenDivs(divsToCheck) {
            let changedFields = []

            for (let i=0; i<divsToCheck.length; i++) {
                   
                let labelItem = divsToCheck[i].previousElementSibling
                let inputItem = document.getElementById(divsToCheck[i].dataset.id)

                // there is a difference when checking update status of INPUT and DIV with inputs
                if (inputItem.hasChildNodes() && inputItem.tagName != 'SELECT') {
                    
                    const childInputs = inputItem.getElementsByTagName('INPUT')     //  receiving all inputs
                    const inputItemDataValue = inputItem.dataset.value.split(',')    //  divs data-value should contain pmts: cast,check,third part etc.
                    let currentValues = []      //  empty array to compare with divs data-value

                    if (childInputs && inputItemDataValue) {
                        for (let i=0; i < childInputs.length; i++) {
                            if (childInputs[i].checked) { currentValues.push(childInputs[i].value) }
                        }
                        if (!equals(inputItemDataValue, currentValues)) {
                            changedFields.push(labelItem.htmlFor)     // add to updates fields only if not equal with it's start value string
                        }
                    }
                } else {
                    if (inputItem.value != '' && inputItem.value != 'DNU') {
                        labelItem.style.setProperty('--color-calm', globalColorHover)
                        labelItem.style.setProperty('--color-hover', globalColorCalm)
                        divsToCheck[i].classList.remove('-hidden')
    
                        changedFields.push(labelItem.htmlFor)
                    }
                }
            }
            return changedFields    // returning fields changed
        }


        function checkAllChanged(input) {
            // test all with the same name, maybe they were changed
            // if so, then show them up and reset color scheme
            const divHidden = document.querySelector(`[data-id='${input.id}']`)
            
            const divsToCheck = document.getElementsByName(`${divHidden.getAttribute('name')}`)     // selecting all divs with the same name
            setTimeout(async() => {
                let a = await checkAllGroupHiddenDivs(divsToCheck)
            }, 1000)      // struggling with forms autofill. After 1s as usual all autofill data appears
        }


        // learning input field
        function cleanField(label) {
            const input = document.getElementById(label.htmlFor)
            if (input) {
                if (input.tagName === 'INPUT') { input.value = '' }
                if (input.tagName === 'SELECT') { input.value = 'DNU' }
                
                if (input.tagName === 'DIV') { 
                    // DIV has to include other inputs
                    const childInputs = input.getElementsByTagName('INPUT')
                    if (childInputs) {
                        for (let i=0; i < childInputs.length; i++) {
                            childInputs[i].checked = false
                        }
                    }
                }
            }
        }

        function redoField(paymentsDiv, paymentsString) {
            const payments = paymentsString.split(',')      //  parsing given paymentsString
            const childInputs = paymentsDiv.getElementsByTagName('INPUT')     //  receiving all child inputs
            if (childInputs) {
                for (let i=0; i < childInputs.length; i++) {
                    childInputs[i].checked = payments.includes(childInputs[i].value)
                }
            }
        }


        // Listeners for all forms when updating
        async function checkUpdates(name) {
            // general middleware before updating
            const changed = await checkAllGroupHiddenDivs(document.querySelectorAll(`[name='${name}']`))

            if (changed.length === 0) {
                alert("There is nothing to change. You didn't update any field")
                return false
            }
            if(!confirm(`This will update current record with fields(${changed.length}):\n+ ${changed.join(',\n+ ').toUpperCase()}.\nAre you sure?`)) {
                return false
            }
            
            // updating INPUT name='whatWasUpdated' before getting back to server
            document.querySelector(`[data-updated=${name}]`).value = changed.toString()

            return true
        }


        function initializeFormWithUpdateListener(formId, inputGroup) {
            const form = document.getElementById(formId)
            if (form) {
                form.addEventListener('submit', async (e) => {
                    const anyChanges = await checkUpdates(inputGroup)
                    if (!anyChanges) { e.preventDefault() }
                })
            }
        }

        // @ENTRY POINT
        // Init all forms and setup update listeners for each
        initializeFormWithUpdateListener('form1', 'data-coll-edits')
        initializeFormWithUpdateListener('form2', 'appl-edits')
        initializeFormWithUpdateListener('form3', 'agr-edits')
      

        // @MIAN Block's toggler
        function toggleBlock(navItem) {
            
            const targetBlock = document.getElementById(navItem.getAttribute('name'))

            if (targetBlock) {    // if block exists
                // hiding all blocks
                document.getElementsByName('blockBox').forEach(block => {
                    block.classList.add('-hidden')
                })
                // showing target one
                targetBlock.classList.remove('-hidden')

                // activating active menu item
                Array.from(document.getElementsByClassName('block-title')).forEach(blockTitle => {
                    blockTitle.classList.remove('-nav-item-active')
                })
                // showing target one
                navItem.classList.add('-nav-item-active')
            }

        }   // toggleBlock


        
        // saving colorschemes for edit fields to enable its RESET
        const globalColorCalm = getComputedStyle(document.body).getPropertyValue('--color-calm')
        const globalColorHover = getComputedStyle(document.body).getPropertyValue('--color-hover')

        // showing block #1 as default
        document.querySelector('[name=block1]').click()



        // MENU Actions
        const block = document.getElementById('block-menu-item')
        const unblock = document.getElementById('unblock-menu-item')
        const archive = document.getElementById('archive-menu-item')

        async function updateUser(action) {
            return await fetch('/admin/user', {
                method: 'PUT',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({
                    studentId: "<%= user.student ? user.student._id : undefined %>",
                    userId: "<%= user._id %>",
                    action
                })
            })
        }

        async function menuAction(action) {
            function toggleMenuItem(element, toggler) {
                if (toggler) {  //switch ON
                    element.classList.remove('-inactive')
                    element.classList.add('-active')
                    element.querySelector('svg').classList.add('-active')
                } else {    //switch OFF
                    element.classList.remove('-active')
                    element.classList.add('-inactive')
                    element.querySelector('svg').classList.remove('-active')
                }
            }

            if (action === "delete" && !confirm('Do you want to delete this Student without a possibility to recover?')) {
                return
            }   // delete before server call to delete

            const result = await updateUser(action)     //  doing PUT for all actions

            // getting back with resopse
            if (!result) { return alert(`Action '${action.toUpperCase()}' was not done`) }
            if (result.status != 200) {
                return alert(`Error: response status ${result.status}, ${result.statusText}`)
            }

            // reaction on response due to request
            if (action === "block" && block && unblock) {
                toggleMenuItem(block, true)
                toggleMenuItem(unblock, false)
            }   // BLOCK
            if (action === "unblock" && block && unblock) {
                toggleMenuItem(unblock, true)
                toggleMenuItem(block, false)
            }   // UNBLOCK
            if (action === "archive" && archive) {
                toggleMenuItem(archive, true)
            }   // ARCHIVE
            if (action === "delete") {
                document.getElementById("back-to-users").click()
            }   // DELETE
        }


    </script>


</body>
</html>